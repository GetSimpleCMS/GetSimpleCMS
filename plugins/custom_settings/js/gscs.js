/*!
 * Knockout JavaScript library v3.3.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

/*
 Knockout.Punches
 Enhanced binding syntaxes for Knockout 3+
 (c) Michael Best
 License: MIT (http://www.opensource.org/licenses/mit-license.php)
 Version 0.5.1
*/

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("modules/notifier",[],function(){function e(e){function o(i,o,a,f){var l=a?r*4:r,c;f&&(l=f==="short"?2:f==="long"?32:10),c&&clearTimeout(c),u(),t.append('<i class="fa fa-'+s[o]+'" style="margin-right: 10px;"></i>');if(typeof i=="string")t.append(i);else for(var h=0;h<i.length;h++)t.append(i[h]);a&&t.append('  <a href="javascript:void(0)" style="float: right; margin-left: 5px;">'+e("CANCEL")+"</a>"),t.append(' <a href="javascript:void(0)" style="float: right;">'+e("OK")+"</a>"),t.find("a").on("click",function(){t.fadeOut(n),u()}),a&&($(t).children("a").eq(1).on("click",function(e){a&&a(),t.fadeOut(n),e.preventDefault()}),$(t).children("a").eq(0).on("click",function(e){a&&t.fadeOut(n)})),t.addClass(o),t.fadeIn(n),a||(c=setTimeout(function(){t.fadeOut(n)},l*1e3))}function u(){t.removeClass(),t.html("")}function a(){$(i).length&&$(i).before('<div id="notification-manager" style="box-sizing: border-box;"></div>'),t=$("#notification-manager"),t.hide()}var t,n=400,r=8,i=".bodycontent",s={updated:"check",notify:"info",error:"close"};return a(),o}return e}),define("modules/globals",["modules/notifier"],function(e){var t={GS:window.GS||{i18n:{}},i18n:window.i18n,$:window.jQuery,notifier:new e(window.i18n)};return t.GS.notifier=t.notifier,t.GS.config={},t.GS.i18n.translated_by=" "+t.GS.i18n.about_translated_by+" "+t.GS.i18n.traductors,t}),function(){(function(n){var x=this||(0,eval)("this"),r=x.document,M=x.navigator,v=x.jQuery,G=x.JSON;(function(e){"function"==typeof define&&define.amd?define("lib/knockout",["exports","require"],e):"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):e(x.ko={})})(function(e,t){function i(e,t){return null===e||typeof e in h?e===t:!1}function s(e,t){var r;return function(){r||(r=c.a.setTimeout(function(){r=n,e()},t))}}function o(e,t){var n;return function(){clearTimeout(n),n=c.a.setTimeout(e,t)}}function u(e,t){t&&"change"!==t?"beforeChange"===t?this.Rb(e):this.Ra(e,t):this.Sb(e)}function a(e,t){null!==t&&t.o&&t.o()}function f(e,t){var n=this.Oc,r=n[y];r.aa||(this.tb&&this.Wa[t]?(n.Wb(t,e,this.Wa[t]),this.Wa[t]=null,--this.tb):r.D[t]||n.Wb(t,e,r.F?{ra:e}:n.Bc(e)))}function l(e,t,n,r){c.f[e]={init:function(e,i,s,o,u){var a,f;return c.u(function(){var s=c.a.c(i()),o=!n!=!s,l=!f;if(l||t||o!==a)l&&c.Ea.Ja()&&(f=c.a.Da(c.h.childNodes(e),!0)),o?(l||c.h.ma(e,c.a.Da(f)),c.mb(r?r(u,s):u,e)):c.h.Ga(e),a=o},null,{l:e}),{controlsDescendantBindings:!0}}},c.j.Ca[e]=!1,c.h.ga[e]=!0}var c="undefined"!=typeof e?e:{};c.b=function(e,t){for(var n=e.split("."),r=c,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},c.N=function(e,t,n){e[t]=n},c.version="3.3.0",c.b("version",c.version),c.options={deferUpdates:!1,useOnlyNativeEvents:!1},c.a=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e,t){return e.__proto__=t,e}function s(e,t,n,r){var i=e[t].match(p)||[];c.a.C(n.match(p),function(e){c.a.za(i,e,r)}),e[t]=i.join(" ")}var o={__proto__:[]}instanceof Array,u="function"==typeof Symbol,a={},f={};a[M&&/Firefox\/2/i.test(M.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],a.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(a,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)f[t[n]]=e});var l={propertychange:!0},h=r&&function(){for(var e=3,t=r.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0];);return 4<e?e:n}(),p=/\S+/g;return{jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],C:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},A:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Zb:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},Va:function(e,t){var n=c.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},$b:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>c.a.A(t,e[n])&&t.push(e[n]);return t},nb:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r],r));return n},Ua:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},Aa:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},za:function(e,t,n){var r=c.a.A(c.a.Gb(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},ta:o,extend:t,fb:i,gb:o?i:t,L:e,Ma:function(e,t){if(!e)return e;var n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},wb:function(e){for(;e.firstChild;)c.removeNode(e.firstChild)},qc:function(e){e=c.a.ea(e);for(var t=(e[0]&&e[0].ownerDocument||r).createElement("div"),n=0,i=e.length;n<i;n++)t.appendChild(c.ia(e[n]));return t},Da:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var s=e[n].cloneNode(!0);i.push(t?c.ia(s):s)}return i},ma:function(e,t){c.a.wb(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,s=0,o=t.length;s<o;s++)i.insertBefore(t[s],r);s=0;for(o=n.length;s<o;s++)c.removeNode(n[s])}},Ia:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},zc:function(e,t){7>h?e.setAttribute("selected",t):e.selected=t},ib:function(e){return null===e||e===n?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},sd:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},Tc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;e&&e!=t;)e=e.parentNode;return!!e},vb:function(e){return c.a.Tc(e,e.ownerDocument.documentElement)},Xb:function(e){return!!c.a.Zb(e,c.a.vb)},J:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},cc:function(e){return c.onError?function(){try{return e.apply(this,arguments)}catch(t){throw c.onError&&c.onError(t),t}}:e},setTimeout:function(e,t){return setTimeout(c.a.cc(e),t)},gc:function(e){setTimeout(function(){throw c.onError&&c.onError(e),e},0)},B:function(e,t,n){var r=c.a.cc(n);n=h&&l[t];if(c.options.useOnlyNativeEvents||n||!v)if(n||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){r.call(e,t)},s="on"+t;e.attachEvent(s,i),c.a.M.ya(e,function(){e.detachEvent(s,i)})}else e.addEventListener(t,r,!1);else v(e).bind(t,r)},Na:function(e,t){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var n;"input"===c.a.J(e)&&e.type&&"click"==t.toLowerCase()?(n=e.type,n="checkbox"==n||"radio"==n):n=!1;if(c.options.useOnlyNativeEvents||!v||n)if("function"==typeof r.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");n=r.createEvent(f[t]||"HTMLEvents"),n.initEvent(t,!0,!0,x,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(n)}else if(n&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else v(e).trigger(t)},c:function(e){return c.P(e)?e():e},Gb:function(e){return c.P(e)?e.G():e},kb:function(e,t,n){var r;t&&("object"==typeof e.classList?(r=e.classList[n?"add":"remove"],c.a.C(t.match(p),function(t){r.call(e.classList,t)})):"string"==typeof e.className.baseVal?s(e.className,"baseVal",t,n):s(e,"className",t,n))},hb:function(e,t){var r=c.a.c(t);if(null===r||r===n)r="";var i=c.h.firstChild(e);!i||3!=i.nodeType||c.h.nextSibling(i)?c.h.ma(e,[e.ownerDocument.createTextNode(r)]):i.data=r,c.a.Yc(e)},yc:function(e,t){e.name=t;if(7>=h)try{e.mergeAttributes(r.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},Yc:function(e){9<=h&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Uc:function(e){if(h){var t=e.style.width;e.style.width=0,e.style.width=t}},nd:function(e,t){e=c.a.c(e),t=c.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},ea:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},ec:function(e){return u?Symbol(e):e},wd:6===h,xd:7===h,O:h,lc:function(e,t){for(var n=c.a.ea(e.getElementsByTagName("input")).concat(c.a.ea(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],s=n.length-1;0<=s;s--)r(n[s])&&i.push(n[s]);return i},ld:function(e){return"string"==typeof e&&(e=c.a.ib(e))?G&&G.parse?G.parse(e):(new Function("return "+e))():null},Mb:function(e,t,n){if(!G||!G.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return G.stringify(c.a.c(e),t,n)},md:function(t,n,i){i=i||{};var s=i.params||{},o=i.includeFields||this.jc,u=t;if("object"==typeof t&&"form"===c.a.J(t))for(var u=t.action,a=o.length-1;0<=a;a--)for(var f=c.a.lc(t,o[a]),l=f.length-1;0<=l;l--)s[f[l].name]=f[l].value;n=c.a.c(n);var h=r.createElement("form");h.style.display="none",h.action=u,h.method="post";for(var p in n)t=r.createElement("input"),t.type="hidden",t.name=p,t.value=c.a.Mb(c.a.c(n[p])),h.appendChild(t);e(s,function(e,t){var n=r.createElement("input");n.type="hidden",n.name=e,n.value=t,h.appendChild(n)}),r.body.appendChild(h),i.submitter?i.submitter(h):h.submit(),setTimeout(function(){h.parentNode.removeChild(h)},0)}}}(),c.b("utils",c.a),c.b("utils.arrayForEach",c.a.C),c.b("utils.arrayFirst",c.a.Zb),c.b("utils.arrayFilter",c.a.Ua),c.b("utils.arrayGetDistinctValues",c.a.$b),c.b("utils.arrayIndexOf",c.a.A),c.b("utils.arrayMap",c.a.nb),c.b("utils.arrayPushAll",c.a.Aa),c.b("utils.arrayRemoveItem",c.a.Va),c.b("utils.extend",c.a.extend),c.b("utils.fieldsIncludedWithJsonPost",c.a.jc),c.b("utils.getFormFields",c.a.lc),c.b("utils.peekObservable",c.a.Gb),c.b("utils.postJson",c.a.md),c.b("utils.parseJson",c.a.ld),c.b("utils.registerEventHandler",c.a.B),c.b("utils.stringifyJson",c.a.Mb),c.b("utils.range",c.a.nd),c.b("utils.toggleDomNodeCssClass",c.a.kb),c.b("utils.triggerEvent",c.a.Na),c.b("utils.unwrapObservable",c.a.c),c.b("utils.objectForEach",c.a.L),c.b("utils.addOrRemoveItem",c.a.za),c.b("utils.setTextContent",c.a.hb),c.b("unwrap",c.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice(0);return r.push.apply(r,arguments),t.apply(e,r)}}),c.a.g=new function(){function e(e,s){var o=e[r];if(!o||"null"===o||!i[o]){if(!s)return n;o=e[r]="ko"+t++,i[o]={}}return i[o]}var t=0,r="__ko__"+(new Date).getTime(),i={};return{get:function(t,r){var i=e(t,!1);return i===n?n:i[r]},set:function(t,r,i){if(i!==n||e(t,!1)!==n)e(t,!0)[r]=i},clear:function(e){var t=e[r];return t?(delete i[t],e[r]=null,!0):!1},R:function(){return t++ +r}}},c.b("utils.domData",c.a.g),c.b("utils.domData.clear",c.a.g.clear),c.a.M=new function(){function e(e,t){var i=c.a.g.get(e,r);return i===n&&t&&(i=[],c.a.g.set(e,r,i)),i}function t(n){var r=e(n,!1);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](n);c.a.g.clear(n),c.a.M.cleanExternalData(n);if(s[n.nodeType])for(r=n.firstChild;n=r;)r=n.nextSibling,8===n.nodeType&&t(n)}var r=c.a.g.R(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{ya:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},wc:function(t,i){var s=e(t,!1);s&&(c.a.Va(s,i),0==s.length&&c.a.g.set(t,r,n))},ia:function(e){if(i[e.nodeType]&&(t(e),s[e.nodeType])){var n=[];c.a.Aa(n,e.getElementsByTagName("*"));for(var r=0,o=n.length;r<o;r++)t(n[r])}return e},removeNode:function(e){c.ia(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){v&&"function"==typeof v.cleanData&&v.cleanData([e])}}},c.ia=c.a.M.ia,c.removeNode=c.a.M.removeNode,c.b("cleanNode",c.ia),c.b("removeNode",c.removeNode),c.b("utils.domNodeDisposal",c.a.M),c.b("utils.domNodeDisposal.addDisposeCallback",c.a.M.ya),c.b("utils.domNodeDisposal.removeDisposeCallback",c.a.M.wc),function(){var e=[0,"",""],t=[1,"<table>","</table>"],i=[3,"<table><tbody><tr>","</tr></tbody></table>"],s=[1,"<select>","</select>"],o={thead:t,tbody:t,tfoot:t,tr:[2,"<table><tbody>","</tbody></table>"],td:i,th:i,option:s,optgroup:s};c.a.va=function(t,n){var i;if(v){if(v.parseHTML)i=v.parseHTML(t,n)||[];else if((i=v.clean([t],n))&&i[0]){for(var s=i[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(s=n)||(s=r),i=s.parentWindow||s.defaultView||x;var u=c.a.ib(t).toLowerCase(),s=s.createElement("div"),a;a=(u=u.match(/^<([a-z]+)[ >]/))&&o[u[1]]||e,u=a[0],a="ignored<div>"+a[1]+t+a[2]+"</div>";for("function"==typeof i.innerShiv?s.appendChild(i.innerShiv(a)):s.innerHTML=a;u--;)s=s.lastChild;i=c.a.ea(s.lastChild.childNodes)}return i},c.a.Kb=function(e,t){c.a.wb(e),t=c.a.c(t);if(null!==t&&t!==n)if("string"!=typeof t&&(t=t.toString()),v)v(e).html(t);else for(var r=c.a.va(t,e.ownerDocument),i=0;i<r.length;i++)e.appendChild(r[i])}}(),c.b("utils.parseHtmlFragment",c.a.va),c.b("utils.setHtml",c.a.Kb),c.V=function(){function e(t,n){if(t)if(8==t.nodeType){var r=c.V.sc(t.nodeValue);null!=r&&n.push({Sc:t,jd:r})}else if(1==t.nodeType)for(var r=0,i=t.childNodes,s=i.length;r<s;r++)e(i[r],n)}var t={};return{Db:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[n]=e,"<!--[ko_memo:"+n+"]-->"},Ec:function(e,r){var i=t[e];if(i===n)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return i.apply(null,r||[]),!0}finally{delete t[e]}},Fc:function(t,n){var r=[];e(t,r);for(var i=0,s=r.length;i<s;i++){var o=r[i].Sc,u=[o];n&&c.a.Aa(u,n),c.V.Ec(r[i].jd,u),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},sc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),c.b("memoization",c.V),c.b("memoization.memoize",c.V.Db),c.b("memoization.unmemoize",c.V.Ec),c.b("memoization.parseMemoText",c.V.sc),c.b("memoization.unmemoizeDomNodeAndDescendants",c.V.Fc),c.fa=function(){function e(){if(s)for(var e=s,t=0,n;u<s;)if(n=i[u++]){if(u>e){if(5e3<=++t){u=s,c.a.gc(Error("'Too much recursion' after processing "+t+" task groups."));break}e=s}try{n()}catch(r){c.a.gc(r)}}}function t(){e(),u=s=i.length=0}var n,i=[],s=0,o=1,u=0;return x.MutationObserver?n=function(e){var t=r.createElement("div");return(new MutationObserver(e)).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(t):n=r&&"onreadystatechange"in r.createElement("script")?function(e){var t=r.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,r.documentElement.removeChild(t),t=null,e()},r.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:n,eb:function(e){return s||c.fa.scheduler(t),i[s++]=e,o++},cancel:function(e){e-=o-s,e>=u&&e<s&&(i[e]=null)},resetForTesting:function(){var e=s-u;return u=s=i.length=0,e},rd:e}}(),c.b("tasks",c.fa),c.b("tasks.schedule",c.fa.eb),c.b("tasks.runEarly",c.fa.rd),c.Ha={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return c.K({read:e,write:function(r){clearTimeout(n),n=c.a.setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,r,i;"number"==typeof t?n=t:(n=t.timeout,r=t.method),e.lb=!1,i="notifyWhenChangesStop"==r?o:s,e.bb(function(e){return i(e,n)})},deferred:function(e,t){if(!0!==t)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.lb||(e.lb=!0,e.bb(function(t){var r;return function(){c.fa.cancel(r),r=c.fa.eb(t),e.notifySubscribers(n,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:i}};var h={"undefined":1,"boolean":1,number:1,string:1};c.b("extenders",c.Ha),c.Cc=function(e,t,n){this.ra=e,this.ob=t,this.Rc=n,this.aa=!1,c.N(this,"dispose",this.o)},c.Cc.prototype.o=function(){this.aa=!0,this.Rc()},c.S=function(){c.a.gb(this,p),p.Ab(this)};var p={Ab:function(e){e.T={},e.Ub=1},subscribe:function(e,t,n){var r=this;n=n||"change";var i=new c.Cc(r,t?e.bind(t):e,function(){c.a.Va(r.T[n],i),r.Sa&&r.Sa(n)});return r.Ba&&r.Ba(n),r.T[n]||(r.T[n]=[]),r.T[n].push(i),i},notifySubscribers:function(e,t){t=t||"change","change"===t&&this.Gc();if(this.Ya(t))try{c.s.ac();for(var n=this.T[t].slice(0),r=0,i;i=n[r];++r)i.aa||i.ob(e)}finally{c.s.end()}},Xa:function(){return this.Ub},ad:function(e){return this.Xa()!==e},Gc:function(){++this.Ub},bb:function(e){var t=this,n=c.P(t),r,i,s;t.Ra||(t.Ra=t.notifySubscribers,t.notifySubscribers=u);var o=e(function(){t.Tb=!1,n&&s===t&&(s=t()),r=!1,t.Bb(i,s)&&t.Ra(i=s)});t.Sb=function(e){t.Tb=r=!0,s=e,o()},t.Rb=function(e){r||(i=e,t.Ra(e,"beforeChange"))}},Ya:function(e){return this.T[e]&&this.T[e].length},Zc:function(e){if(e)return this.T[e]&&this.T[e].length||0;var t=0;return c.a.L(this.T,function(e,n){"dirty"!==e&&(t+=n.length)}),t},Bb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&c.a.L(e,function(e,n){var r=c.Ha[e];"function"==typeof r&&(t=r(t,n)||t)}),t}};c.N(p,"subscribe",p.subscribe),c.N(p,"extend",p.extend),c.N(p,"getSubscriptionsCount",p.Zc),c.a.ta&&c.a.fb(p,Function.prototype),c.S.fn=p,c.oc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},c.b("subscribable",c.S),c.b("isSubscribable",c.oc),c.Ea=c.s=function(){function e(e){n.push(r),r=e}function t(){r=n.pop()}var n=[],r,i=0;return{ac:e,end:t,vc:function(e){if(r){if(!c.oc(e))throw Error("Only subscribable things can act as dependencies");r.ob.call(r.Nc,e,e.Jc||(e.Jc=++i))}},I:function(n,r,i){try{return e(),n.apply(r,i||[])}finally{t()}},Ja:function(){if(r)return r.u.Ja()},ab:function(){if(r)return r.ab}}}(),c.b("computedContext",c.Ea),c.b("computedContext.getDependenciesCount",c.Ea.Ja),c.b("computedContext.isInitial",c.Ea.ab),c.b("ignoreDependencies",c.vd=c.s.I);var d=c.a.ec("_latestValue");c.X=function(e){function t(){return 0<arguments.length?(t.Bb(t[d],arguments[0])&&(t.pa(),t[d]=arguments[0],t.oa()),this):(c.s.vc(t),t[d])}return t[d]=e,c.a.ta||c.a.extend(t,c.S.fn),c.S.fn.Ab(t),c.a.gb(t,m),c.options.deferUpdates&&c.Ha.deferred(t,!0),t};var m={equalityComparer:i,G:function(){return this[d]},oa:function(){this.notifySubscribers(this[d])},pa:function(){this.notifySubscribers(this[d],"beforeChange")}};c.a.ta&&c.a.fb(m,c.S.fn);var g=c.X.xa="__ko_proto__";m[g]=c.X,c.yb=function(e,t){return null===e||e===n||e[g]===n?!1:e[g]===t?!0:c.yb(e[g],t)},c.P=function(e){return c.yb(e,c.X)},c.Ka=function(e){return"function"==typeof e&&e[g]===c.X||"function"==typeof e&&e[g]===c.K&&e.bd?!0:!1},c.b("observable",c.X),c.b("isObservable",c.P),c.b("isWriteableObservable",c.Ka),c.b("isWritableObservable",c.Ka),c.b("observable.fn",m),c.N(m,"peek",m.G),c.N(m,"valueHasMutated",m.oa),c.N(m,"valueWillMutate",m.pa),c.ua=function(e){e=e||[];if("object"==typeof e&&"length"in e)return e=c.X(e),c.a.gb(e,c.ua.fn),e.extend({trackArrayChanges:!0});throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},c.ua.fn={remove:function(e){for(var t=this.G(),n=[],r="function"!=typeof e||c.P(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.pa(),n.push(s),t.splice(i,1),i--)}return n.length&&this.oa(),n},removeAll:function(e){if(e===n){var t=this.G(),r=t.slice(0);return this.pa(),t.splice(0,t.length),this.oa(),r}return e?this.remove(function(t){return 0<=c.a.A(e,t)}):[]},destroy:function(e){var t=this.G(),n="function"!=typeof e||c.P(e)?function(t){return t===e}:e;this.pa();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.oa()},destroyAll:function(e){return e===n?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=c.a.A(e,t)}):[]},indexOf:function(e){var t=this();return c.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.pa(),this.G()[n]=t,this.oa())}},c.a.ta&&c.a.fb(c.ua.fn,c.X.fn),c.a.C("pop push reverse shift sort splice unshift".split(" "),function(e){c.ua.fn[e]=function(){var t=this.G();this.pa(),this.bc(t,e,arguments);var n=t[e].apply(t,arguments);return this.oa(),n===t?this:n}}),c.a.C(["slice"],function(e){c.ua.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),c.b("observableArray",c.ua),c.Ha.trackArrayChanges=function(e,t){function n(){if(!r){r=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&"change"!==n||++o,t.apply(this,arguments)};var n=[].concat(e.G()||[]);i=null,s=e.subscribe(function(t){t=[].concat(t||[]);if(e.Ya("arrayChange")){var r;if(!i||1<o)i=c.a.qb(n,t,e.pb);r=i}n=t,i=null,o=0,r&&r.length&&e.notifySubscribers(r,"arrayChange")})}}e.pb={},t&&"object"==typeof t&&c.a.extend(e.pb,t),e.pb.sparse=!0;if(!e.bc){var r=!1,i=null,s,o=0,u=e.Ba,a=e.Sa;e.Ba=function(t){u&&u.call(e,t),"arrayChange"===t&&n()},e.Sa=function(t){a&&a.call(e,t),"arrayChange"!==t||e.Ya("arrayChange")||(s.o(),r=!1)},e.bc=function(e,t,n){function s(e,t,n){return u[u.length]={status:e,value:t,index:n}}if(r&&!o){var u=[],a=e.length,f=n.length,l=0;switch(t){case"push":l=a;case"unshift":for(t=0;t<f;t++)s("added",n[t],l+t);break;case"pop":l=a-1;case"shift":a&&s("deleted",e[l],l);break;case"splice":t=Math.min(Math.max(0,0>n[0]?a+n[0]:n[0]),a);for(var a=1===f?a:Math.min(t+(n[1]||0),a),f=t+f-2,l=Math.max(a,f),h=[],p=[],d=2;t<l;++t,++d)t<a&&p.push(s("deleted",e[t],t)),t<f&&h.push(s("added",n[d],t));c.a.kc(p,h);break;default:return}i=u}}}};var y=c.a.ec("_state");c.u=c.K=function(e,t,r){function i(){if(0<arguments.length){if("function"!=typeof s)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return s.apply(o.xb,arguments),this}return c.s.vc(i),(o.ba||o.F&&i.Za())&&i.ja(),o.ca}"object"==typeof e?r=e:(r=r||{},e&&(r.read=e));if("function"!=typeof r.read)throw Error("Pass a function that returns the value of the ko.computed");var s=r.write,o={ca:n,ba:!0,$a:!1,Nb:!1,aa:!1,Hb:!1,F:!1,od:r.read,xb:t||r.owner,l:r.disposeWhenNodeIsRemoved||r.l||null,Fa:r.disposeWhen||r.Fa,ub:null,D:{},U:0,ic:null};return i[y]=o,i.bd="function"==typeof s,c.a.ta||c.a.extend(i,c.S.fn),c.S.fn.Ab(i),c.a.gb(i,b),r.pure?(o.Hb=!0,o.F=!0,c.a.extend(i,w)):r.deferEvaluation&&c.a.extend(i,E),c.options.deferUpdates&&c.Ha.deferred(i,!0),o.l&&(o.Nb=!0,o.l.nodeType||(o.l=null)),o.F||r.deferEvaluation||i.ja(),o.l&&i.ka()&&c.a.M.ya(o.l,o.ub=function(){i.o()}),i};var b={equalityComparer:i,Ja:function(){return this[y].U},Wb:function(e,t,n){if(this[y].Hb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[y].D[e]=n,n.Qa=this[y].U++,n.wa=t.Xa()},Za:function(){var e,t,n=this[y].D;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],t.ra.ad(t.wa)))return!0},hd:function(){this.Pa&&!this[y].$a&&this.Pa()},ka:function(){return this[y].ba||0<this[y].U},qd:function(){this.Tb||this.hc()},Bc:function(e){if(e.lb&&!this[y].l){var t=e.subscribe(this.hd,this,"dirty"),n=e.subscribe(this.qd,this);return{ra:e,o:function(){t.o(),n.o()}}}return e.subscribe(this.hc,this)},hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[y].ic),this[y].ic=c.a.setTimeout(function(){e.ja(!0)},t)):e.Pa?e.Pa():e.ja(!0)},ja:function(e){var t=this[y],n=t.Fa;if(!t.$a&&!t.aa){if(t.l&&!c.a.vb(t.l)||n&&n()){if(!t.Nb){this.o();return}}else t.Nb=!1;t.$a=!0;try{this.Xc(e)}finally{t.$a=!1}t.U||this.o()}},Xc:function(e){var t=this[y],r=t.Hb?n:!t.U,i={Oc:this,Wa:t.D,tb:t.U};c.s.ac({Nc:i,ob:f,u:this,ab:r}),t.D={},t.U=0,i=this.Wc(t,i),this.Bb(t.ca,i)&&(t.F||this.notifySubscribers(t.ca,"beforeChange"),t.ca=i,t.F?this.Gc():e&&this.notifySubscribers(t.ca)),r&&this.notifySubscribers(t.ca,"awake")},Wc:function(e,t){try{var n=e.od;return e.xb?n.call(e.xb):n()}finally{c.s.end(),t.tb&&!e.F&&c.a.L(t.Wa,a),e.ba=!1}},G:function(){var e=this[y];return(e.ba&&!e.U||e.F&&this.Za())&&this.ja(),e.ca},bb:function(e){c.S.fn.bb.call(this,e),this.Pa=function(){this.Rb(this[y].ca),this[y].ba=!0,this.Sb(this)}},o:function(){var e=this[y];!e.F&&e.D&&c.a.L(e.D,function(e,t){t.o&&t.o()}),e.l&&e.ub&&c.a.M.wc(e.l,e.ub),e.D=null,e.U=0,e.aa=!0,e.ba=!1,e.F=!1,e.l=null}},w={Ba:function(e){var t=this,n=t[y];if(!n.aa&&n.F&&"change"==e){n.F=!1;if(n.ba||t.Za())n.D=null,n.U=0,n.ba=!0,t.ja();else{var r=[];c.a.L(n.D,function(e,t){r[t.Qa]=e}),c.a.C(r,function(e,r){var i=n.D[e],s=t.Bc(i.ra);s.Qa=r,s.wa=i.wa,n.D[e]=s})}n.aa||t.notifySubscribers(n.ca,"awake")}},Sa:function(e){var t=this[y];t.aa||"change"!=e||this.Ya("change")||(c.a.L(t.D,function(e,n){n.o&&(t.D[e]={ra:n.ra,Qa:n.Qa,wa:n.wa},n.o())}),t.F=!0,this.notifySubscribers(n,"asleep"))},Xa:function(){var e=this[y];return e.F&&(e.ba||this.Za())&&this.ja(),c.S.fn.Xa.call(this)}},E={Ba:function(e){"change"!=e&&"beforeChange"!=e||this.G()}};c.a.ta&&c.a.fb(b,c.S.fn);var S=c.X.xa;c.u[S]=c.X,b[S]=c.u,c.dd=function(e){return c.yb(e,c.u)},c.b("computed",c.u),c.b("dependentObservable",c.u),c.b("isComputed",c.dd),c.b("computed.fn",b),c.N(b,"peek",b.G),c.N(b,"dispose",b.o),c.N(b,"isActive",b.ka),c.N(b,"getDependenciesCount",b.Ja),c.uc=function(e,t){return"function"==typeof e?c.u(e,t,{pure:!0}):(e=c.a.extend({},e),e.pure=!0,c.u(e,t))},c.b("pureComputed",c.uc),function(){function e(i,s,o){o=o||new r,i=s(i);if("object"!=typeof i||null===i||i===n||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var u=i instanceof Array?[]:{};return o.save(i,u),t(i,function(t){var r=s(i[t]);switch(typeof r){case"boolean":case"number":case"string":case"function":u[t]=r;break;case"object":case"undefined":var a=o.get(r);u[t]=a!==n?a:e(r,s,o)}}),u}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function r(){this.keys=[],this.values=[]}c.Dc=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;c.P(e)&&10>t;t++)e=e();return e})},c.toJSON=function(e,t,n){return e=c.Dc(e),c.a.Mb(e,t,n)},r.prototype={constructor:r,save:function(e,t){var n=c.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){return e=c.a.A(this.keys,e),0<=e?this.values[e]:n}}}(),c.b("toJS",c.Dc),c.b("toJSON",c.toJSON),function(){c.m={H:function(e){switch(c.a.J(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?c.a.g.get(e,c.f.options.Eb):7>=c.a.O?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?c.m.H(e.options[e.selectedIndex]):n;default:return e.value}},qa:function(e,t,r){switch(c.a.J(e)){case"option":switch(typeof t){case"string":c.a.g.set(e,c.f.options.Eb,n),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:c.a.g.set(e,c.f.options.Eb,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":if(""===t||null===t)t=n;for(var i=-1,s=0,o=e.options.length,u;s<o;++s)if(u=c.m.H(e.options[s]),u==t||""==u&&t===n){i=s;break}if(r||0<=i||t===n&&1<e.size)e.selectedIndex=i;break;default:if(null===t||t===n)t="";e.value=t}}}}(),c.b("selectExtensions",c.m),c.b("selectExtensions.readValue",c.m.H),c.b("selectExtensions.writeValue",c.m.qa),c.j=function(){function e(e){e=c.a.ib(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t=[],n=e.match(r),o,u=[],a=0;if(n){n.push(",");for(var f=0,l;l=n[f];++f){var h=l.charCodeAt(0);if(44===h){if(0>=a){t.push(o&&u.length?{key:o,value:u.join("")}:{unknown:o||u.join("")}),o=a=0,u=[];continue}}else if(58===h){if(!a&&!o&&1===u.length){o=u.pop();continue}}else 47===h&&f&&1<l.length?(h=n[f-1].match(i))&&!s[h[0]]&&(e=e.substr(e.indexOf(l)+1),n=e.match(r),n.push(","),f=-1,l="/"):40===h||123===h||91===h?++a:41===h||125===h||93===h?--a:o||u.length||34!==h&&39!==h||(l=l.slice(1,-1));u.push(l)}}return t}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,s={"in":1,"return":1,"typeof":1},o={};return{Ca:[],na:o,Fb:e,cb:function(r,i){function s(e,r){var i;if(!l){var h=c.getBindingHandler(e);if(h&&h.preprocess&&!(r=h.preprocess(r,e,s)))return;if(h=o[e])i=r,0<=c.a.A(t,i)?i=!1:(h=i.match(n),i=null===h?!1:h[1]?"Object("+h[1]+")"+h[2]:i),h=i;h&&a.push("'"+e+"':function(_z){"+i+"=_z}")}f&&(r="function(){return "+r+" }"),u.push("'"+e+"':"+r)}i=i||{};var u=[],a=[],f=i.valueAccessors,l=i.bindingParams,h="string"==typeof r?e(r):r;return c.a.C(h,function(e){s(e.key||e.unknown,e.value)}),a.length&&s("_ko_property_writers","{"+a.join(",")+" }"),u.join(",")},gd:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},Oa:function(e,t,n,r,i){e&&c.P(e)?!c.Ka(e)||i&&e.G()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),c.b("expressionRewriting",c.j),c.b("expressionRewriting.bindingRewriteValidators",c.j.Ca),c.b("expressionRewriting.parseObjectLiteral",c.j.Fb),c.b("expressionRewriting.preProcessBindings",c.j.cb),c.b("expressionRewriting._twoWayBindings",c.j.na),c.b("jsonExpressionRewriting",c.j),c.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",c.j.cb),function(){function e(e){return 8==e.nodeType&&o.test(s?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&u.test(s?e.text:e.nodeValue)}function n(n,r){for(var i=n,s=1,o=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return o;o.push(i),e(i)&&s++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:null}var s=r&&"<!--test-->"===r.createComment("test").text,o=s?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=s?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,a={ul:!0,ol:!0};c.h={ga:{},childNodes:function(t){return e(t)?n(t):t.childNodes},Ga:function(t){if(e(t)){t=c.h.childNodes(t);for(var n=0,r=t.length;n<r;n++)c.removeNode(t[n])}else c.a.wb(t)},ma:function(t,n){if(e(t)){c.h.Ga(t);for(var r=t.nextSibling,i=0,s=n.length;i<s;i++)r.parentNode.insertBefore(n[i],r)}else c.a.ma(t,n)},tc:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},nc:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):c.h.tc(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=i(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},$c:e,ud:function(e){return(e=(s?e.text:e.nodeValue).match(o))?e[1]:null},rc:function(n){if(a[c.a.J(n)]){var r=n.firstChild;if(r)do if(1===r.nodeType){var s;s=r.firstChild;var o=null;if(s)do if(o)o.push(s);else if(e(s)){var u=i(s,!0);u?s=u:o=[s]}else t(s)&&(o=[s]);while(s=s.nextSibling);if(s=o)for(o=r.nextSibling,u=0;u<s.length;u++)o?n.insertBefore(s[u],o):n.appendChild(s[u])}while(r=r.nextSibling)}}}}(),c.b("virtualElements",c.h),c.b("virtualElements.allowedBindings",c.h.ga),c.b("virtualElements.emptyNode",c.h.Ga),c.b("virtualElements.insertAfter",c.h.nc),c.b("virtualElements.prepend",c.h.tc),c.b("virtualElements.setDomNodeChildren",c.h.ma),function(){c.$=function(){this.Mc={}},c.a.extend(c.$.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||c.i.getComponentNameForNode(e);case 8:return c.h.$c(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e):null;return c.i.Vb(n,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return c.i.Vb(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return c.h.ud(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var i=this.Mc,s=e+(r&&r.valueAccessors||""),o;if(!(o=i[s])){var u,a="with($context){with($data||{}){return{"+c.j.cb(e,r)+"}}}";u=new Function("$context","$element",a),o=i[s]=u}return o(t,n)}catch(f){throw f.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+f.message,f}}}),c.$.instance=new c.$}(),c.b("bindingProvider",c.$),function(){function e(e){return function(){return e}}function t(e){return e()}function r(e){return c.a.Ma(c.s.I(e),function(t,n){return function(){return e()[n]}})}function i(t,n,i){return"function"==typeof t?r(t.bind(null,n,i)):c.a.Ma(t,e)}function s(e,t){return r(this.getBindings.bind(this,e,t))}function o(e,t,n){var r,i=c.h.firstChild(t),s=c.$.instance,o=s.preprocessNode;if(o){for(;r=i;)i=c.h.nextSibling(r),o.call(s,r);i=c.h.firstChild(t)}for(;r=i;)i=c.h.nextSibling(r),u(e,r,n)}function u(e,t,n){var r=!0,i=1===t.nodeType;i&&c.h.rc(t);if(i&&n||c.$.instance.nodeHasBindings(t))r=f(t,null,e,n).shouldBindDescendants;r&&!h[c.a.J(t)]&&o(e,t,!i)}function a(e){var t=[],n={},r=[];return c.a.L(e,function i(s){if(!n[s]){var o=c.getBindingHandler(s);o&&(o.after&&(r.push(s),c.a.C(o.after,function(t){if(e[t]){if(-1!==c.a.A(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.length--),t.push({key:s,mc:o})),n[s]=!0}}),t}function f(e,r,i,o){var u=c.a.g.get(e,p);if(!r){if(u)throw Error("You cannot apply bindings multiple times to the same element.");c.a.g.set(e,p,!0)}!u&&o&&c.Ac(e,i);var f;if(r&&"function"!=typeof r)f=r;else{var l=c.$.instance,h=l.getBindingAccessors||s,d=c.K(function(){return(f=r?r(i,e):h.call(l,e,i))&&i.Z&&i.Z(),f},null,{l:e});f&&d.ka()||(d=null)}var v;if(f){var m=function(){return c.a.Ma(d?d():f,t)},g=d?function(e){return function(){return t(d()[e])}}:function(e){return f[e]};m.get=function(e){return f[e]&&t(g(e))},m.has=function(e){return e in f},o=a(f),c.a.C(o,function(t){var r=t.mc.init,s=t.mc.update,o=t.key;if(8===e.nodeType&&!c.h.ga[o])throw Error("The binding '"+o+"' cannot be used with virtual elements");try{"function"==typeof r&&c.s.I(function(){var t=r(e,g(o),m,i.$data,i);if(t&&t.controlsDescendantBindings){if(v!==n)throw Error("Multiple bindings ("+v+" and "+o+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=o}}),"function"==typeof s&&c.K(function(){s(e,g(o),m,i.$data,i)},null,{l:e})}catch(u){throw u.message='Unable to process binding "'+o+": "+f[o]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:v===n}}function l(e){return e&&e instanceof c.da?e:new c.da(e)}c.f={};var h={script:!0,textarea:!0,template:!0};c.getBindingHandler=function(e){return c.f[e]},c.da=function(e,t,r,i){var s=this,o="function"==typeof e&&!c.P(e),u,a=c.K(function(){var n=o?e():e,u=c.a.c(n);return t?(t.Z&&t.Z(),c.a.extend(s,t),a&&(s.Z=a)):(s.$parents=[],s.$root=u,s.ko=c),s.$rawData=n,s.$data=u,r&&(s[r]=u),i&&i(s,t,u),s.$data},null,{Fa:function(){return u&&!c.a.Xb(u)},l:!0});a.ka()&&(s.Z=a,a.equalityComparer=null,u=[],a.Hc=function(e){u.push(e),c.a.M.ya(e,function(e){c.a.Va(u,e),u.length||(a.o(),s.Z=a=n)})})},c.da.prototype.createChildContext=function(e,t,n){return new c.da(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},c.da.prototype.extend=function(e){return new c.da(this.Z||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,c.a.extend(t,"function"==typeof e?e():e)})};var p=c.a.g.R(),d=c.a.g.R();c.Ac=function(e,t){if(2!=arguments.length)return c.a.g.get(e,d);c.a.g.set(e,d,t),t.Z&&t.Z.Hc(e)},c.Ta=function(e,t,n){return 1===e.nodeType&&c.h.rc(e),f(e,t,l(n),!0)},c.Kc=function(e,t,n){return n=l(n),c.Ta(e,i(t,n,e),n)},c.mb=function(e,t){1!==t.nodeType&&8!==t.nodeType||o(l(e),t,!0)},c.Yb=function(e,t){!v&&x.jQuery&&(v=x.jQuery);if(t&&1!==t.nodeType&&8!==t.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||x.document.body,u(l(e),t,!0)},c.sb=function(e){switch(e.nodeType){case 1:case 8:var t=c.Ac(e);if(t)return t;if(e.parentNode)return c.sb(e.parentNode)}return n},c.Qc=function(e){return(e=c.sb(e))?e.$data:n},c.b("bindingHandlers",c.f),c.b("applyBindings",c.Yb),c.b("applyBindingsToDescendants",c.mb),c.b("applyBindingAccessorsToNode",c.Ta),c.b("applyBindingsToNode",c.Kc),c.b("contextFor",c.sb),c.b("dataFor",c.Qc)}(),function(e){function t(t,r){var o=i.hasOwnProperty(t)?i[t]:e,u;o?o.subscribe(r):(o=i[t]=new c.S,o.subscribe(r),n(t,function(e,n){var r=!!n&&!!n.synchronous;s[t]={definition:e,ed:r},delete i[t],u||r?o.notifySubscribers(e):c.fa.eb(function(){o.notifySubscribers(e)})}),u=!0)}function n(e,t){r("getConfig",[e],function(n){n?r("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function r(t,n,i,s){s||(s=c.i.loaders.slice(0));var o=s.shift();if(o){var u=o[t];if(u){var a=!1;if(u.apply(o,n.concat(function(e){a?i(null):null!==e?i(e):r(t,n,i,s)}))!==e&&(a=!0,!o.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else r(t,n,i,s)}else i(null)}var i={},s={};c.i={get:function(n,r){var i=s.hasOwnProperty(n)?s[n]:e;i?i.ed?c.s.I(function(){r(i.definition)}):c.fa.eb(function(){r(i.definition)}):t(n,r)},dc:function(e){delete s[e]},Qb:r},c.i.loaders=[],c.b("components",c.i),c.b("components.get",c.i.get),c.b("components.clearCachedDefinition",c.i.dc)}(),function(){function e(e,t,n,r){function i(){0===--u&&r(s)}var s={},u=2,a=n.template;n=n.viewModel,a?o(t,a,function(t){c.i.Qb("loadTemplate",[e,t],function(e){s.template=e,i()})}):i(),n?o(t,n,function(t){c.i.Qb("loadViewModel",[e,t],function(e){s[f]=e,i()})}):i()}function n(e,t,r){if("function"==typeof t)r(function(e){return new t(e)});else if("function"==typeof t[f])r(t[f]);else if("instance"in t){var i=t.instance;r(function(){return i})}else"viewModel"in t?n(e,t.viewModel,r):e("Unknown viewModel value: "+t)}function i(e){switch(c.a.J(e)){case"script":return c.a.va(e.text);case"textarea":return c.a.va(e.value);case"template":if(s(e.content))return c.a.Da(e.content.childNodes)}return c.a.Da(e.childNodes)}function s(e){return x.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function o(e,n,r){"string"==typeof n.require?t||x.require?(t||x.require)([n.require],r):e("Uses require, but no AMD loader is present"):r(n)}function u(e){return function(t){throw Error("Component '"+e+"': "+t)}}var a={};c.i.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(c.i.Cb(e))throw Error("Component "+e+" is already registered");a[e]=t},c.i.Cb=function(e){return a.hasOwnProperty(e)},c.i.unregister=function(e){delete a[e],c.i.dc(e)},c.i.fc={getConfig:function(e,t){t(a.hasOwnProperty(e)?a[e]:null)},loadComponent:function(t,n,r){var i=u(t);o(i,n,function(n){e(t,i,n,r)})},loadTemplate:function(e,t,n){e=u(e);if("string"==typeof t)n(c.a.va(t));else if(t instanceof Array)n(t);else if(s(t))n(c.a.ea(t.childNodes));else if(t.element)if(t=t.element,x.HTMLElement?t instanceof HTMLElement:t&&t.tagName&&1===t.nodeType)n(i(t));else if("string"==typeof t){var o=r.getElementById(t);o?n(i(o)):e("Cannot find element with ID "+t)}else e("Unknown element type: "+t);else e("Unknown template value: "+t)},loadViewModel:function(e,t,r){n(u(e),t,r)}};var f="createViewModel";c.b("components.register",c.i.register),c.b("components.isRegistered",c.i.Cb),c.b("components.unregister",c.i.unregister),c.b("components.defaultLoader",c.i.fc),c.i.loaders.push(c.i.fc),c.i.Ic=a}(),function(){function e(e,n){var r=e.getAttribute("params");if(r){var r=t.parseBindingsString(r,n,e,{valueAccessors:!0,bindingParams:!0}),r=c.a.Ma(r,function(t){return c.u(t,null,{l:e})}),i=c.a.Ma(r,function(t){var n=t.G();return t.ka()?c.u({read:function(){return c.a.c(t())},write:c.Ka(n)&&function(e){t()(e)},l:e}):n});return i.hasOwnProperty("$raw")||(i.$raw=r),i}return{$raw:{}}}c.i.getComponentNameForNode=function(e){var t=c.a.J(e);if(c.i.Cb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=c.a.O&&e.tagName===t))return t},c.i.Vb=function(t,n,r,i){if(1===n.nodeType){var s=c.i.getComponentNameForNode(n);if(s){t=t||{};if(t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var o={name:s,params:e(n,r)};t.component=i?function(){return o}:o}}return t};var t=new c.$;9>c.a.O&&(c.i.register=function(e){return function(t){return e.apply(this,arguments)}}(c.i.register),r.createDocumentFragment=function(e){return function(){var t=e(),n=c.i.Ic,r;for(r in n);return t}}(r.createDocumentFragment))}(),function(e){function t(e,t,n){t=t.template;if(!t)throw Error("Component '"+e+"' has no template");e=c.a.Da(t),c.h.ma(n,e)}function n(e,t,n,r){var i=e.createViewModel;return i?i.call(e,r,{element:t,templateNodes:n}):r}var r=0;c.f.component={init:function(i,s,o,u,a){function f(){var e=l&&l.dispose;"function"==typeof e&&e.call(l),h=null}var l,h,p=c.a.ea(c.h.childNodes(i));return c.a.M.ya(i,f),c.u(function(){var o=c.a.c(s()),u,d;"string"==typeof o?u=o:(u=c.a.c(o.name),d=c.a.c(o.params));if(!u)throw Error("No component name specified");var v=h=++r;c.i.get(u,function(r){if(h===v){f();if(!r)throw Error("Unknown component '"+u+"'");t(u,r,i);var s=n(r,i,p,d);r=a.createChildContext(s,e,function(e){e.$component=s,e.$componentTemplateNodes=p}),l=s,c.mb(r,i)}})},null,{l:i}),{controlsDescendantBindings:!0}}},c.h.ga.component=!0}();var T={"class":"className","for":"htmlFor"};c.f.attr={update:function(e,t){var r=c.a.c(t())||{};c.a.L(r,function(t,r){r=c.a.c(r);var i=!1===r||null===r||r===n;i&&e.removeAttribute(t),8>=c.a.O&&t in T?(t=T[t],i?e.removeAttribute(t):e[t]=r):i||e.setAttribute(t,r.toString()),"name"===t&&c.a.yc(e,i?"":r.toString())})}},function(){c.f.checked={after:["value","attr"],init:function(e,t,r){function i(){var n=e.checked,i=d?o():n;if(!c.Ea.ab()&&(!a||n)){var s=c.s.I(t);if(l){var u=h?s.G():s;p!==i?(n&&(c.a.za(u,i,!0),c.a.za(u,p,!1)),p=i):c.a.za(u,i,n),h&&c.Ka(s)&&s(u)}else c.j.Oa(s,r,"checked",i,!0)}}function s(){var n=c.a.c(t());l?e.checked=0<=c.a.A(n,o()):u?e.checked=n:e.checked=o()===n}var o=c.uc(function(){return r.has("checkedValue")?c.a.c(r.get("checkedValue")):r.has("value")?c.a.c(r.get("value")):e.value}),u="checkbox"==e.type,a="radio"==e.type;if(u||a){var f=t(),l=u&&c.a.c(f)instanceof Array,h=!(l&&f.push&&f.splice),p=l?o():n,d=a||l;a&&!e.name&&c.f.uniqueName.init(e,function(){return!0}),c.u(i,null,{l:e}),c.a.B(e,"click",i),c.u(s,null,{l:e}),f=n}}},c.j.na.checked=!0,c.f.checkedValue={update:function(e,t){e.value=c.a.c(t())}}}(),c.f.css={update:function(e,t){var n=c.a.c(t());null!==n&&"object"==typeof n?c.a.L(n,function(t,n){n=c.a.c(n),c.a.kb(e,t,n)}):(n=c.a.ib(String(n||"")),c.a.kb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,c.a.kb(e,n,!0))}},c.f.enable={update:function(e,t){var n=c.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},c.f.disable={update:function(e,t){c.f.enable.update(e,function(){return!c.a.c(t())})}},c.f.event={init:function(e,t,n,r,i){var s=t()||{};c.a.L(s,function(s){"string"==typeof s&&c.a.B(e,s,function(e){var o,u=t()[s];if(u){try{var a=c.a.ea(arguments);r=i.$data,a.unshift(r),o=u.apply(r,a)}finally{!0!==o&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(s+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},c.f.foreach={pc:function(e){return function(){var t=e(),n=c.a.Gb(t);return!n||"number"==typeof n.length?{foreach:t,templateEngine:c.W.xa}:(c.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:c.W.xa})}},init:function(e,t){return c.f.template.init(e,c.f.foreach.pc(t))},update:function(e,t,n,r,i){return c.f.template.update(e,c.f.foreach.pc(t),n,r,i)}},c.j.Ca.foreach=!1,c.h.ga.foreach=!0,c.f.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var s;try{s=i.activeElement}catch(o){s=i.body}r=s===e}i=t(),c.j.Oa(i,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),s=r.bind(null,!1);c.a.B(e,"focus",i),c.a.B(e,"focusin",i),c.a.B(e,"blur",s),c.a.B(e,"focusout",s)},update:function(e,t){var n=!!c.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),c.s.I(c.a.Na,null,[e,n?"focusin":"focusout"]))}},c.j.na.hasfocus=!0,c.f.hasFocus=c.f.hasfocus,c.j.na.hasFocus=!0,c.f.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){c.a.Kb(e,t())}},l("if"),l("ifnot",!1,!0),l("with",!0,!1,function(e,t){return e.createChildContext(t)});var N={};c.f.options={init:function(e){if("select"!==c.a.J(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,r){function i(){return c.a.Ua(e.options,function(e){return e.selected})}function s(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function o(t,n){if(v&&l)c.m.qa(e,c.a.c(r.get("value")),!0);else if(d.length){var i=0<=c.a.A(d,c.m.H(n[0]));c.a.zc(n[0],i),v&&!i&&c.s.I(c.a.Na,null,[e,"change"])}}var u=e.multiple,a=0!=e.length&&u?e.scrollTop:null,f=c.a.c(t()),l=r.get("valueAllowUnset")&&r.has("value"),h=r.get("optionsIncludeDestroyed");t={};var p,d=[];l||(u?d=c.a.nb(i(),c.m.H):0<=e.selectedIndex&&d.push(c.m.H(e.options[e.selectedIndex]))),f&&("undefined"==typeof f.length&&(f=[f]),p=c.a.Ua(f,function(e){return h||e===n||null===e||!c.a.c(e._destroy)}),r.has("optionsCaption")&&(f=c.a.c(r.get("optionsCaption")),null!==f&&f!==n&&p.unshift(N)));var v=!1;t.beforeRemove=function(t){e.removeChild(t)},f=o,r.has("optionsAfterRender")&&"function"==typeof r.get("optionsAfterRender")&&(f=function(e,t){o(0,t),c.s.I(r.get("optionsAfterRender"),null,[t[0],e!==N?e:n])}),c.a.Jb(e,p,function(t,i,o){return o.length&&(d=!l&&o[0].selected?[c.m.H(o[0])]:[],v=!0),i=e.ownerDocument.createElement("option"),t===N?(c.a.hb(i,r.get("optionsCaption")),c.m.qa(i,n)):(o=s(t,r.get("optionsValue"),t),c.m.qa(i,c.a.c(o)),t=s(t,r.get("optionsText"),o),c.a.hb(i,t)),[i]},t,f),c.s.I(function(){if(l)c.m.qa(e,c.a.c(r.get("value")),!0);else{var t;u?t=d.length&&i().length<d.length:t=d.length&&0<=e.selectedIndex?c.m.H(e.options[e.selectedIndex])!==d[0]:d.length||0<=e.selectedIndex,t&&c.a.Na(e,"change")}}),c.a.Uc(e),a&&20<Math.abs(a-e.scrollTop)&&(e.scrollTop=a)}},c.f.options.Eb=c.a.g.R(),c.f.selectedOptions={after:["options","foreach"],init:function(e,t,n){c.a.B(e,"change",function(){var r=t(),i=[];c.a.C(e.getElementsByTagName("option"),function(e){e.selected&&i.push(c.m.H(e))}),c.j.Oa(r,n,"selectedOptions",i)})},update:function(e,t){if("select"!=c.a.J(e))throw Error("values binding applies only to SELECT elements");var n=c.a.c(t()),r=e.scrollTop;n&&"number"==typeof n.length&&c.a.C(e.getElementsByTagName("option"),function(e){var t=0<=c.a.A(n,c.m.H(e));e.selected!=t&&c.a.zc(e,t)}),e.scrollTop=r}},c.j.na.selectedOptions=!0,c.f.style={update:function(e,t){var r=c.a.c(t()||{});c.a.L(r,function(t,r){r=c.a.c(r);if(null===r||r===n||!1===r)r="";e.style[t]=r})}},c.f.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");c.a.B(e,"submit",function(n){var r,s=t();try{r=s.call(i.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},c.f.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){c.a.hb(e,t())}},c.h.ga.text=!0,function(){if(x&&x.navigator)var e=function(e){if(e)return parseFloat(e[1])},t=x.opera&&x.opera.version&&parseInt(x.opera.version()),r=x.navigator.userAgent,i=e(r.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=e(r.match(/Firefox\/([^ ]*)/));if(10>c.a.O)var o=c.a.g.R(),u=c.a.g.R(),a=function(e){var t=this.activeElement;(t=t&&c.a.g.get(t,u))&&t(e)},f=function(e,t){var n=e.ownerDocument;c.a.g.get(n,o)||(c.a.g.set(n,o,!0),c.a.B(n,"selectionchange",a)),c.a.g.set(e,u,t)};c.f.textInput={init:function(e,r,o){function u(t,n){c.a.B(e,t,n)}function a(){var t=c.a.c(r());if(null===t||t===n)t="";v!==n&&t===v?c.a.setTimeout(a,4):e.value!==t&&(p=t,e.value=t)}function l(){d||(v=e.value,d=c.a.setTimeout(h,4))}function h(){clearTimeout(d),v=d=n;var t=e.value;p!==t&&(p=t,c.j.Oa(r(),o,"textInput",t))}var p=e.value,d,v,m=9==c.a.O?l:h;10>c.a.O?(u("propertychange",function(e){"value"===e.propertyName&&m(e)}),8==c.a.O&&(u("keyup",h),u("keydown",h)),8<=c.a.O&&(f(e,m),u("dragend",l))):(u("input",h),5>i&&"textarea"===c.a.J(e)?(u("keydown",l),u("paste",l),u("cut",l)):11>t?u("keydown",l):4>s&&(u("DOMAutoComplete",h),u("dragdrop",h),u("drop",h))),u("change",h),c.u(a,null,{l:e})}},c.j.na.textInput=!0,c.f.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),c.f.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++c.f.uniqueName.Pc;c.a.yc(e,n)}}},c.f.uniqueName.Pc=0,c.f.value={after:["options","foreach"],init:function(e,t,n){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var r=["change"],i=n.get("valueUpdate"),s=!1,o=null;i&&("string"==typeof i&&(i=[i]),c.a.Aa(r,i),r=c.a.$b(r));var u=function(){o=null,s=!1;var r=t(),i=c.m.H(e);c.j.Oa(r,n,"value",i)};!c.a.O||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=c.a.A(r,"propertychange")||(c.a.B(e,"propertychange",function(){s=!0}),c.a.B(e,"focus",function(){s=!1}),c.a.B(e,"blur",function(){s&&u()})),c.a.C(r,function(t){var n=u;c.a.sd(t,"after")&&(n=function(){o=c.m.H(e),c.a.setTimeout(u,0)},t=t.substring(5)),c.a.B(e,t,n)});var a=function(){var r=c.a.c(t()),i=c.m.H(e);if(null!==o&&r===o)c.a.setTimeout(a,0);else if(r!==i)if("select"===c.a.J(e)){var s=n.get("valueAllowUnset"),i=function(){c.m.qa(e,r,s)};i(),s||r===c.m.H(e)?c.a.setTimeout(i,0):c.s.I(c.a.Na,null,[e,"change"])}else c.m.qa(e,r)};c.u(a,null,{l:e})}else c.Ta(e,{checkedValue:t})},update:function(){}},c.j.na.value=!0,c.f.visible={update:function(e,t){var n=c.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},function(e){c.f[e]={init:function(t,n,r,i,s){return c.f.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i,s)}}}("click"),c.Y=function(){},c.Y.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},c.Y.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},c.Y.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||r;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new c.w.v(n)}if(1==e.nodeType||8==e.nodeType)return new c.w.ha(e);throw Error("Unknown template type: "+e)},c.Y.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n,r)},c.Y.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},c.Y.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},c.b("templateEngine",c.Y),c.Ob=function(){function e(e,t,n,r){e=c.j.Fb(e);for(var i=c.j.Ca,s=0;s<e.length;s++){var o=e[s].key;if(i.hasOwnProperty(o)){var u=i[o];if("function"==typeof u){if(o=u(e[s].value))throw Error(o)}else if(!u)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+c.j.cb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Vc:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return c.Ob.kd(e,t)},n)},kd:function(r,i){return r.replace(t,function(t,n,r,s,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",i)})},Lc:function(e,t){return c.V.Db(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&c.Ta(i,e,r)})}}}(),c.b("__tr_ambtns",c.Ob.Lc),function(){c.w={},c.w.v=function(e){if(this.v=e){var t=c.a.J(e);this.jb="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},c.w.v.prototype.text=function(){var e=1===this.jb?"text":2===this.jb?"value":"innerHTML";if(0==arguments.length)return this.v[e];var t=arguments[0];"innerHTML"===e?c.a.Kb(this.v,t):this.v[e]=t};var e=c.a.g.R()+"_";c.w.v.prototype.data=function(t){if(1===arguments.length)return c.a.g.get(this.v,e+t);c.a.g.set(this.v,e+t,arguments[1])};var t=c.a.g.R();c.w.v.prototype.nodes=function(){var e=this.v;if(0==arguments.length)return(c.a.g.get(e,t)||{}).rb||(3===this.jb?e.content:4===this.jb?e:n);c.a.g.set(e,t,{rb:arguments[0]})},c.w.ha=function(e){this.v=e},c.w.ha.prototype=new c.w.v,c.w.ha.prototype.constructor=c.w.ha,c.w.ha.prototype.text=function(){if(0==arguments.length){var e=c.a.g.get(this.v,t)||{};return e.Pb===n&&e.rb&&(e.Pb=e.rb.innerHTML),e.Pb}c.a.g.set(this.v,t,{Pb:arguments[0]})},c.b("templateSources",c.w),c.b("templateSources.domElement",c.w.v),c.b("templateSources.anonymousTemplate",c.w.ha)}(),function(){function e(e,t,n){var r;for(t=c.h.nextSibling(t);e&&(r=e)!==t;)e=c.h.nextSibling(r),n(r,e)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1],s=r.parentNode,o=c.$.instance,u=o.preprocessNode;if(u){e(r,i,function(e,t){var n=e.previousSibling,s=u.call(o,e);s&&(e===r&&(r=s[0]||t),e===i&&(i=s[s.length-1]||n))}),t.length=0;if(!r)return;r===i?t.push(r):(t.push(r,i),c.a.Ia(t,s))}e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||c.Yb(n,e)}),e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||c.V.Fc(e,[n])}),c.a.Ia(t,s)}}function r(e){return e.nodeType?e:0<e.length?e[0]:null}function i(e,n,i,s,u){u=u||{};var a=(e&&r(e)||i||{}).ownerDocument,f=u.templateEngine||o;c.Ob.Vc(i,f,a),i=f.renderTemplate(i,s,u,a);if("number"!=typeof i.length||0<i.length&&"number"!=typeof i[0].nodeType)throw Error("Template engine must return an array of DOM nodes");a=!1;switch(n){case"replaceChildren":c.h.ma(e,i),a=!0;break;case"replaceNode":c.a.xc(e,i),a=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+n)}return a&&(t(i,s),u.afterRender&&c.s.I(u.afterRender,null,[i,s.$data])),i}function s(e,t,n){return c.P(e)?e():"function"==typeof e?e(t,n):e}var o;c.Lb=function(e){if(!(e==n||e instanceof c.Y))throw Error("templateEngine must inherit from ko.templateEngine");o=e},c.Ib=function(e,t,u,a,f){u=u||{};if((u.templateEngine||o)==n)throw Error("Set a template engine before calling renderTemplate");f=f||"replaceChildren";if(a){var l=r(a);return c.K(function(){var n=t&&t instanceof c.da?t:new c.da(c.a.c(t)),o=s(e,n.$data,n),n=i(a,f,o,n,u);"replaceNode"==f&&(a=n,l=r(a))},null,{Fa:function(){return!l||!c.a.vb(l)},l:l&&"replaceNode"==f?l.parentNode:l})}return c.V.Db(function(n){c.Ib(e,t,u,n,"replaceNode")})},c.pd=function(e,r,o,u,a){function f(e,n){t(n,h),o.afterRender&&o.afterRender(n,e),h=null}function l(t,n){h=a.createChildContext(t,o.as,function(e){e.$index=n});var r=s(e,t,h);return i(null,"ignoreTargetNode",r,h,o)}var h;return c.K(function(){var e=c.a.c(r)||[];"undefined"==typeof e.length&&(e=[e]),e=c.a.Ua(e,function(e){return o.includeDestroyed||e===n||null===e||!c.a.c(e._destroy)}),c.s.I(c.a.Jb,null,[u,e,l,o,f])},null,{l:u})};var u=c.a.g.R();c.f.template={init:function(e,t){var n=c.a.c(t());if("string"==typeof n||n.name)c.h.Ga(e);else{if("nodes"in n){n=n.nodes||[];if(c.P(n))throw Error('The "nodes" option must be a plain, non-observable array.');n=c.a.qc(n)}else n=c.h.childNodes(e),n=c.a.qc(n);(new c.w.ha(e)).nodes(n)}return{controlsDescendantBindings:!0}},update:function(e,t,r,i,s){var o=t(),a;t=c.a.c(o),r=!0,i=null,"string"==typeof t?t={}:(o=t.name,"if"in t&&(r=c.a.c(t["if"])),r&&"ifnot"in t&&(r=!c.a.c(t.ifnot)),a=c.a.c(t.data)),"foreach"in t?i=c.pd(o||e,r&&t.foreach||[],t,e,s):r?(s="data"in t?s.createChildContext(a,t.as):s,i=c.Ib(o||e,s,t,e)):c.h.Ga(e),s=i,(a=c.a.g.get(e,u))&&"function"==typeof a.o&&a.o(),c.a.g.set(e,u,s&&s.ka()?s:n)}},c.j.Ca.template=function(e){return e=c.j.Fb(e),1==e.length&&e[0].unknown||c.j.gd(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},c.h.ga.template=!0}(),c.b("setTemplateEngine",c.Lb),c.b("renderTemplate",c.Ib),c.a.kc=function(e,t,n){if(e.length&&t.length){var r,i,s,o,u;for(r=i=0;(!n||r<n)&&(o=e[i]);++i){for(s=0;u=t[s];++s)if(o.value===u.value){o.moved=u.index,u.moved=o.index,t.splice(s,1),r=s=0;break}r+=s}}},c.a.qb=function(){function e(e,t,n,r,i){var s=Math.min,o=Math.max,u=[],a,f=e.length,l,h=t.length,p=h-f||1,d=f+h+1,v,m,g;for(a=0;a<=f;a++)for(m=v,u.push(v=[]),g=s(h,a+p),l=o(0,a-1);l<=g;l++)v[l]=l?a?e[a-1]===t[l-1]?m[l-1]:s(m[l]||d,v[l-1]||d)+1:l+1:a+1;s=[],o=[],p=[],a=f;for(l=h;a||l;)h=u[a][l]-1,l&&h===u[a][l-1]?o.push(s[s.length]={status:n,value:t[--l],index:l}):a&&h===u[a-1][l]?p.push(s[s.length]={status:r,value:e[--a],index:a}):(--l,--a,i.sparse||s.push({status:"retained",value:t[l]}));return c.a.kc(p,o,!i.dontLimitMoves&&10*f),s.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),c.b("utils.compareArrays",c.a.qb),function(){function e(e,t,r,i,s){var o=[],u=c.K(function(){var n=t(r,s,c.a.Ia(o,e))||[];0<o.length&&(c.a.xc(o,n),i&&c.s.I(i,null,[r,n,s])),o.length=0,c.a.Aa(o,n)},null,{l:e,Fa:function(){return!c.a.Xb(o)}});return{la:o,K:u.ka()?u:n}}var t=c.a.g.R(),r=c.a.g.R();c.a.Jb=function(i,s,o,u,a){function f(e,t){S=p[t],y!==t&&(E[e]=S),S.zb(y++),c.a.Ia(S.la,i),m.push(S),w.push(S)}function l(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&c.a.C(t[n].la,function(r){e(r,n,t[n].sa)})}s=s||[],u=u||{};var h=c.a.g.get(i,t)===n,p=c.a.g.get(i,t)||[],d=c.a.nb(p,function(e){return e.sa}),v=c.a.qb(d,s,u.dontLimitMoves),m=[],g=0,y=0,b=[],w=[];s=[];for(var E=[],d=[],S,x=0,T,N;T=v[x];x++)switch(N=T.moved,T.status){case"deleted":N===n&&(S=p[g],S.K&&(S.K.o(),S.K=n),b.push.apply(b,c.a.Ia(S.la,i)||[]),u.beforeRemove&&S.la.length&&(m.push(S),w.push(S),S.sa!==r&&(s[x]=S))),g++;break;case"retained":f(x,g++);break;case"added":N!==n?f(x,N):(S={sa:T.value,zb:c.X(y++)},m.push(S),w.push(S),h||(d[x]=S))}c.a.g.set(i,t,m),l(u.beforeMove,E),c.a.C(b,u.beforeRemove?c.ia:c.removeNode);for(var x=0,h=c.h.firstChild(i),C;S=w[x];x++){S.la||c.a.extend(S,e(i,o,S.sa,a,S.zb));for(g=0;v=S.la[g];h=v.nextSibling,C=v,g++)v!==h&&c.h.nc(i,v,C);!S.cd&&a&&(a(S.sa,S.la,S.zb),S.cd=!0)}l(u.beforeRemove,s);for(x=0;x<s.length;++x)s[x]&&(s[x].sa=r);l(u.afterMove,E),l(u.afterAdd,d)}}(),c.b("utils.setDomNodeChildrenFromArrayMapping",c.a.Jb),c.W=function(){this.allowTemplateRewriting=!1},c.W.prototype=new c.Y,c.W.prototype.constructor=c.W,c.W.prototype.renderTemplateSource=function(e,t,n,r){return(t=(9>c.a.O?0:e.nodes)?e.nodes():null)?c.a.ea(t.cloneNode(!0).childNodes):(e=e.text(),c.a.va(e,r))},c.W.xa=new c.W,c.Lb(c.W.xa),c.b("nativeTemplateEngine",c.W),function(){c.La=function(){var e=this.fd=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,n,i,s){s=s||r,i=i||{};if(2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var o=t.data("precompiled");return o||(o=t.text()||"",o=v.template(null,"{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}"),t.data("precompiled",o)),t=[n.$data],n=v.extend({koBindingContext:n},i.templateOptions),n=v.tmpl(o,t,n),n.appendTo(s.createElement("div")),v.fragments={},n},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){r.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},c.La.prototype=new c.Y,c.La.prototype.constructor=c.La;var e=new c.La;0<e.fd&&c.Lb(e),c.b("jqueryTmplTemplateEngine",c.La)}()})})()}(),function(e){if("function"==typeof define&&define.amd)define("lib/knockout.punches.min",["lib/knockout"],e);else if("object"==typeof module){var t=require("knockout");e(t)}else e(window.ko)}(function(e){function t(e,t){return r(n(e),"preprocess",t)}function n(t){return"object"==typeof t?t:e.getBindingHandler(t)||(e.bindingHandlers[t]={})}function r(e,t,n){if(e[t]){var r=e[t];e[t]=function(e,t,i){if(e=r.call(this,e,t,i))return n.call(this,e,t,i)}}else e[t]=n;return e}function i(t){var n=e.bindingProvider.instance;if(n.preprocessNode){var r=n.preprocessNode;n.preprocessNode=function(e){var n=r.call(this,e);return n||(n=t.call(this,e)),n}}else n.preprocessNode=t}function s(t,n){var r=e.getBindingHandler;e.getBindingHandler=function(e){var i;return r(e)||(i=e.match(t))&&n(i,e)}}function o(e){if(-1===e.indexOf("|"))return e;var t=e.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[^\s|:"'][^|:"']*[^\s|:"']|[^\s|:"']/g);if(t&&1<t.length){t.push("|"),e=t[0];for(var n,r,i=!1,s=!1,o=1;r=t[o];++o)"|"===r?(i&&(":"===n&&(e+="undefined"),e+=")"),i=s=!0):(s?e="ko.filters['"+r+"']("+e:i&&":"===r?(":"===n&&(e+="undefined"),e+=","):e+=r,s=!1),n=r}return e}function u(e){t(e,o)}function a(t,n,r){function i(r){s[r]&&(s[r]=function(i,s){var o=Array.prototype.slice.call(arguments,0);return o[1]=function(){var e={};return e[t]=s(),e},e.bindingHandlers[n][r].apply(this,o)})}var s=e.utils.extend({},this);return i("init"),i("update"),s.preprocess&&(s.preprocess=null),e.virtualElements.allowedBindings[n]&&(e.virtualElements.allowedBindings[r]=!0),s}function f(n,r){var i=e.getBindingHandler(n);if(i){var s=i.getNamespacedHandler||a;i.getNamespacedHandler=function(){return t(s.apply(this,arguments),r)}}}function l(t,n,r){if("{"!==t.charAt(0))return t;t=e.expressionRewriting.parseObjectLiteral(t),e.utils.arrayForEach(t,function(e){r(n+C+e.key,e.value)})}function c(e){t(e,l)}function h(e){return/^([$_a-z][$\w]*|.+(\.\s*[$_a-z][$\w]*|\[.+\]))$/i.test(e)?"function(_x,_y,_z){return("+e+")(_x,_y,_z);}":e}function p(e){t(e,h)}function d(e,t,i){e=n(e),e._propertyPreprocessors||(r(e,"preprocess",v),e._propertyPreprocessors={}),r(e._propertyPreprocessors,t,i)}function v(t,n,r){if("{"!==t.charAt(0))return t;t=e.expressionRewriting.parseObjectLiteral(t);var i=[],s=this._propertyPreprocessors||{};return e.utils.arrayForEach(t,function(e){var t=e.key;e=e.value,s[t]&&(e=s[t](e,t,r)),e&&i.push("'"+t+"':"+e)}),"{"+i.join(",")+"}"}function m(e){return function(t){return"function("+e+"){return("+t+");}"}}function g(e,t,n){function r(e){var i=e.match(/^([\s\S]*)}}([\s\S]*?)\{\{([\s\S]*)$/);i?(r(i[1]),t(i[2]),n(i[3])):n(e)}if(e=e.match(/^([\s\S]*?)\{\{([\s\S]*)}}([\s\S]*)$/))t(e[1]),r(e[2]),t(e[3])}function y(e){return null==e?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function b(e){if(3===e.nodeType&&e.nodeValue&&-1!==e.nodeValue.indexOf("{{")&&"TEXTAREA"!=(e.parentNode||{}).nodeName){var t=[];g(e.nodeValue,function(e){e&&t.push(document.createTextNode(e))},function(n){n&&t.push.apply(t,A.wrapExpression(n,e))});if(t.length){if(e.parentNode){for(var n=0,r=t.length,i=e.parentNode;n<r;++n)i.insertBefore(t[n],e);i.removeChild(e)}return t}}}function w(){i(b)}function E(t){if(1===t.nodeType&&t.attributes.length)for(var n=t.getAttribute(O),r=e.utils.arrayPushAll([],t.attributes),i=r.length,s=0;s<i;++s){var o=r[s];if(o.specified&&o.name!=O&&-1!==o.value.indexOf("{{")){var u=[],a="";g(o.value,function(e){e&&u.push('"'+e.replace(/"/g,'\\"')+'"')},function(e){e&&(a=e,u.push("ko.unwrap("+e+")"))}),1<u.length&&(a='""+'+u.join("+"));if(a){var f=o.name.toLowerCase(),f=M.attributeBinding(f,a,t)||S(f,a,t),n=n?n+(","+f):f;t.setAttribute(O,n),t.removeAttribute(o.name)}}}}function S(t,n,r){return e.getBindingHandler(t)?t+":"+n:"attr."+t+":"+n}function x(){i(E)}var T=e.unwrap,N=e.punches={utils:{addBindingPreprocessor:t,addNodePreprocessor:i,addBindingHandlerCreator:s,setBindingPreprocessor:t,setNodePreprocessor:i}};N.enableAll=function(){w(),x(),c("attr"),c("css"),c("event"),c("style"),e.bindingHandlers.checked.after.push("attr.value"),u("text"),u("html"),f("attr",o),p("click"),p("submit"),p("optionsAfterRender"),f("event",h),d("template","beforeRemove",h),d("template","afterAdd",h),d("template","afterRender",h)},e.filters={uppercase:function(e){return String.prototype.toUpperCase.call(T(e))},lowercase:function(e){return String.prototype.toLowerCase.call(T(e))},"default":function(e,t){return e=T(e),"function"==typeof e?e:"string"==typeof e?""===y(e)?t:e:null==e||0==e.length?t:e},replace:function(e,t,n){return String.prototype.replace.call(T(e),t,n)},fit:function(e,t,n,r){e=T(e);if(!(t&&(""+e).length>t))return e;switch(n=""+(n||"..."),t-=n.length,e=""+e,r){case"left":return n+e.slice(-t);case"middle":return r=Math.ceil(t/2),e.substr(0,r)+n+e.slice(r-t);default:return e.substr(0,t)+n}},json:function(t,n,r){return e.toJSON(t,r,n)},number:function(e){return(+T(e)).toLocaleString()}},N.textFilter={preprocessor:o,enableForBinding:u};var C=".";s(/([^\.]+)\.(.+)/,function(t,n){var r=t[1],i=e.bindingHandlers[r];if(i)return r=(i.getNamespacedHandler||a).call(i,t[2],r,n),e.bindingHandlers[n]=r}),N.namespacedBinding={defaultGetHandler:a,setDefaultBindingPreprocessor:f,addDefaultBindingPreprocessor:f,preprocessor:l,enableForBinding:c},N.wrappedCallback={preprocessor:h,enableForBinding:p},N.preprocessBindingProperty={setPreprocessor:d,addPreprocessor:d};var k=m("$data,$event");N.expressionCallback={makePreprocessor:m,eventPreprocessor:k,enableForBinding:function(e,n){n=Array.prototype.slice.call(arguments,1).join(),t(e,m(n))}},e.bindingHandlers.on={getNamespacedHandler:function(n){return n=e.getBindingHandler("event"+C+n),t(n,k)}};if(!e.virtualElements.allowedBindings.html){var L=e.bindingHandlers.html.update;e.bindingHandlers.html.update=function(t,n){if(8===t.nodeType){var r=T(n());null!=r?(r=e.utils.parseHtmlFragment(""+r),e.virtualElements.setDomNodeChildren(t,r)):e.virtualElements.emptyNode(t)}else L(t,n)},e.virtualElements.allowedBindings.html=!0}var A=N.interpolationMarkup={preprocessor:b,enable:w,wrapExpression:function(e,t){var n=t?t.ownerDocument:document,r=!0,i;e=y(e);var s=e[0],o=e[e.length-1],u=[];if("#"===s){if("/"===o?i=e.slice(1,-1):(i=e.slice(1),r=!1),s=i.match(/^([^,"'{}()\/:[\]\s]+)\s+([^\s:].*)/))i=s[1]+":"+s[2]}else"/"!==s&&(i="{"===s&&"}"===o?"html:"+y(e.slice(1,-1)):"text:"+y(e));return i&&u.push(n.createComment("ko "+i)),r&&u.push(n.createComment("/ko")),u}},O="data-bind",M=N.attributeInterpolationMarkup={preprocessor:E,enable:x,attributeBinding:S};return N}),define("modules/ko-extensions",["lib/knockout","lib/knockout.punches.min","modules/globals"],function(e,t,n){var r=n.i18n;e.bindingHandlers.onewaySelect={init:function(t,n,r,i){var s=n(),o=e.utils.unwrapObservable(s.value),u=s.action,a=t.addEventListener?"addEventListener":"attachEvent";t[a]("change",function(e){var n=t.value;u&&typeof u=="function"&&u.call(i,n,t.options[t.selectedIndex].getAttribute("data-index")),t.selectedIndex=0},!1),t.value=o},update:function(t,n,r,i){var s=n(),o=e.utils.unwrapObservable(s.optionsValue),u=e.utils.unwrapObservable(s.optionsText),a=e.utils.unwrapObservable(s.options);t.innerHTML="",e.utils.arrayForEach(a,function(n,r){var i;i=document.createElement("option"),n.index>-1&&i.setAttribute("data-index",n.index),i.value=e.unwrap(n[o]),t.appendChild(i),i.appendChild(document.createTextNode(e.unwrap(n[u])))}),t.selectedIndex=0}},e.components.register("array-to-text",{viewModel:function(t){var n=this;this.data=t.data,this.rows=t.rows||6,this.i18n=t.i18n||"",this.view=e.computed({read:function(){var t="",n=e.utils.unwrapObservable(this.data)||[];return e.utils.arrayForEach(n,function(e){t+=e+"\n"}),t},write:function(t){t=t.trim().replace(/\n\s*/g,"\n");var r=t.split("\n"),i=[];e.utils.arrayForEach(r,function(e,t){e&&i.push(e.trim())}),e.isObservable(n.data)?this.data(i):this.data=i},owner:this})},template:'<textarea data-bind="value: view, i18n: i18n, attr: {rows: rows}"></textarea>'}),e.filters.capitalize=function(t){var n=e.utils.unwrapObservable(t);return n.length?n.slice(0,1).toUpperCase()+n.slice(1):""},e.filters.i18n=function(t){return typeof t=="function"&&(t=e.unwrap(t)),r(t)},t.enableAll()});var saveAs=saveAs||typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if(typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))return;var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!e.externalHost&&"download"in r,s=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},o=e.webkitRequestFileSystem,u=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f="application/octet-stream",l=0,c=[],h=function(){var e=c.length;while(e--){var t=c[e];typeof t=="string"?n().revokeObjectURL(t):t.remove()}c.length=0},p=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i=="function")try{i.call(e,n||e)}catch(s){a(s)}}},d=function(t,a){var h=this,d=t.type,v=!1,m,g,y=function(){var e=n().createObjectURL(t);return c.push(e),e},b=function(){p(h,"writestart progress write writeend".split(" "))},w=function(){if(v||!m)m=y(t);g?g.location.href=m:window.open(m,"_blank"),h.readyState=h.DONE,b()},E=function(e){return function(){if(h.readyState!==h.DONE)return e.apply(this,arguments)}},S={create:!0,exclusive:!1},x;h.readyState=h.INIT,a||(a="download");if(i){m=y(t),r.href=m,r.download=a,s(r),h.readyState=h.DONE,b();return}e.chrome&&d&&d!==f&&(x=t.slice||t.webkitSlice,t=x.call(t,0,t.size,f),v=!0),o&&a!=="download"&&(a+=".download");if(d===f||o)g=e;if(!u){w();return}l+=t.size,u(e.TEMPORARY,l,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(a,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL(),c.push(e),h.readyState=h.DONE,p(h,"writeend",t)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=h["on"+e]}),n.write(t),h.abort=function(){n.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),w)}),w)};e.getFile(a,{create:!1},E(function(e){e.remove(),n()}),E(function(e){e.code===e.NOT_FOUND_ERR?n():w()}))}),w)}),w)},v=d.prototype,m=function(e,t){return new d(e,t)};return v.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,e.addEventListener("unload",h,!1),m.unload=function(){h(),e.removeEventListener("unload",h,!1)},m}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);typeof module!="undefined"&&module!==null?module.exports=saveAs:typeof define!="undefined"&&define!==null&&define.amd!=null&&define("lib/filesaver",[],function(){return saveAs}),String.prototype.endsWithAny=function(){var e=Array.prototype.slice.call(arguments),t=this.toLowerCase().toString();for(var n=0;n<e.length;n++)if(t.indexOf(e[n],t.length-e[n].length)!==-1)return!0;return!1};var saveTextAs=saveTextAs||function(e,t,n){t=t||"download.txt",n=n||"utf-8",e=(e||"").replace(/\r?\n/g,"\r\n");if(saveAs&&Blob){var r=new Blob([e],{type:"text/plain;charset="+n});return saveAs(r,t),!0}var i=window.frames.saveTxtWindow;if(!i){i=document.createElement("iframe"),i.id="saveTxtWindow",i.style.display="none",document.body.insertBefore(i,null),i=window.frames.saveTxtWindow;if(!i){i=window.open("","_temp","width=100,height=100");if(!i)return window.alert("Sorry, download file could not be created."),!1}}var s=i.document;s.open("text/plain","replace"),s.charset=n,t.endsWithAny(".htm",".html")?(s.close(),s.body.innerHTML="\r\n"+e+"\r\n"):(t.endsWithAny(".txt")||(t+=".txt"),s.write(e),s.close());var o=s.execCommand("SaveAs",null,t);return i.close(),o};define("models/tab",["lib/knockout"],function(e){function t(t){this.data={lookup:e.observable(t.tab.lookup),label:e.observable(t.tab.label),type:t.tab.type||"site"},t.tab.options&&(this.data.options=t.tab.options),t.tab.version&&(this.data.version=t.tab.version);for(var n in t.tab)this.data.hasOwnProperty(n)||(this.data[n]=t.tab[n])}return t.prototype.getData=function(){var t={};for(var n in this.data)/settings|tab/.test(n)||(t[n]=e.utils.unwrapObservable(this.data[n]));return t},t}),define("modules/state",["lib/knockout"],function(e){var t={mode:e.observable("manage"),tabSelection:e.observable(),settingSelection:e.observableArray(),searchFilter:e.observable(""),pageLoaded:e.observable(!1),imgBrowserActive:e.observable(!1),imgBrowserSetting:null};return t.mode.subscribe(function(){var e=$(".cs-main");e.hide(),e.fadeIn(600)}),t}),define("modules/color-index",{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",yellow:"#ffff00",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",black:"#000000",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",yellowgreen:"#9ACD32",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",darkgray:"#a9a9a9",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",gainsboro:"#dcdcdc",darkgoldenrod:"#b8860b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkorange:"#ff8c00",lightgrey:"#d3d3d3",darkolivegreen:"#556b2f",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",honeydew:"#f0fff0",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",whitesmoke:"#f5f5f5",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",tan:"#d2b48c",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",white:"#ffffff",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgray:"#d3d3d3",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lawngreen:"#7cfc00",lightslategray:"#778899",lightyellow:"#ffffe0",lightslategrey:"#778899",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",royalblue:"#4169e1",lightsteelblue:"#b0c4de",magenta:"#ff00ff",maroon:"#800000",mediumblue:"#0000cd",mediumorchid:"#ba55d3",purple:"#800080",rosybrown:"#bc8f8f",mediumaquamarine:"#66cdaa",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mistyrose:"#ffe4e1",navajowhite:"#ffdead",sienna:"#a0522d",teal:"#008080",mediumslateblue:"#7b68ee",midnightblue:"#191970",mediumvioletred:"#c71585",mintcream:"#f5fffa",moccasin:"#ffe4b5",orchid:"#da70d6",skyblue:"#87ceeb",mediumspringgreen:"#00fa9a",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",wheat:"#f5deb3",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",papayawhip:"#ffefd5",palevioletred:"#d87093",orangered:"#ff4500",violet:"#ee82ee",mediumturquoise:"#48d1cc",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",red:"#ff0000",turquoise:"#40e0d0",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",silver:"#c0c0c0",tomato:"#ff6347",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",thistle:"#d8bfd8"}),define("models/setting",["lib/knockout","modules/globals","modules/state","modules/color-index"],function(e,t,n,r){Object.create||(Object.create=function(e){return e});var i=t.i18n,s={select:0,radio:0,"icon-radio":0,checkbox:!1,"icon-checkbox":!1,"switch":!1,text:"",textarea:"",color:"",image:"",date:""},o=function(e){var t=e.replace(/[rgba\(\)]*/g,"").split(/, */),n="#";t.length>3&&t.pop();while(t.length){var r=parseInt(t.shift()).toString(16);n+=r.length==1?"0"+r:r}return n},u=function(t){this.data={lookup:e.observable(t.lookup||""),label:e.observable(t.label||""),type:"section-title"},this.template={edit:this.data.type+"-edit",manage:this.data.type+"-manage"}},a=function(t,n){this.data={lookup:e.observable(t.lookup||i("def_setting_lookup")),label:e.observable(t.label||i("def_setting_label")),type:t.type&&t.type.replace("icon-","")||"text",descr:e.observable(t.descr||""),access:e.observable(t.access||"normal"),value:e.observable(t.value||s[t.type])},t.default&&(this.data.default=t.default),this.hidden=e.pureComputed(function(){return this.data.access()==="hidden"},this),this.locked=e.pureComputed(function(){return this.data.access()==="locked"},this),this.template={edit:this.data.type+"-edit",manage:this.data.type+"-manage"},this.expanded=e.observable(t.expanded||!1),this.expandIcon=e.pureComputed(function(){return"fa fa-fw fa-"+(this.expanded()?"minus":"plus")+"-square"},this);for(var r in t)!this.data.hasOwnProperty(r)&&!this.hasOwnProperty(r)&&(this.data[r]=t[r])};a.prototype.name=u.prototype.name=function(t){return e.utils.unwrapObservable(this.data.lookup)+"-"+t},a.prototype.expand=function(){this.expanded(!this.expanded())},a.prototype.getData=u.prototype.getData=function(){var t={},n;for(var r in this.data){n=e.utils.unwrapObservable(this.data[r]);if(/boolean|number/.test(typeof n)||n&&n.length)t[r]=this.data[r]}return t};var f=function(t){var n=this;a.call(this,t||{}),this.data.options=e.observableArray(t.options),this.optionsMap=e.pureComputed(function(){var e=n.data.options(),t={};for(var r=0;r<e.length;r++)t[e[r]]=r;return t}),this.optionValue=function(e){return n.optionsMap()[e]},this.optionText=function(e){return e}};f.prototype=Object.create(a.prototype),f.constructor=f;var l=function(n){a.call(this,n||{});var r=this;this.data.i18n=e.observableArray(),e.utils.arrayForEach(t.GS.config.i18nLangs,function(t,i){r.data.i18n.push(e.observable(n.i18n&&n.i18n[i]?n.i18n[i]:""))}),this.activeLang=e.observable(n.i18n?0:-1),this.i18n=e.pureComputed({read:function(){return this.activeLang()>-1?!0:!1},write:function(n){var r=[];if(n)for(var i=0;i<t.GS.config.i18nLangs.length;i++)r[i]||(r[i]=e.observable(this.data.value())),r[i](this.data.value());else this.data.value(this.data.i18n()[0]);this.data.i18n(r),this.activeLang(n?0:-1)}},this)};l.prototype=Object.create(a.prototype),l.constructor=l,l.prototype.getData=function(){var t=a.prototype.getData.call(this);return t.i18n=e.toJS(this.data.i18n),t.i18n.join("").length===0?delete t.i18n:t.i18n.length&&(t.value=t.i18n[0]),t};var c=function(t){a.call(this,t||{}),this.icon=e.observable(t.type.indexOf("icon")>-1?!0:!1),this.template.manage=e.pureComputed(function(){return(this.icon()?"icon-":"")+this.data.type+"-manage"},this)};c.prototype=Object.create(a.prototype),c.constructor=c,c.prototype.toggleValue=function(){this.data.value(!this.data.value())};var h=function(t){a.call(this,t||{}),this.template.edit="base-edit",this.colorBox=e.pureComputed({read:function(){var e=this.data.value().trim(),t;return e.length?e.indexOf("#")>-1&&e.length===4?(t=e.replace("#","").split(""),"#"+t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):r.hasOwnProperty(e)?r[e]:e.match("rgb")?o(e):e:"#FFFFFF"},write:function(e){this.data.value(e.toUpperCase())}},this)};h.prototype=Object.create(a.prototype),h.constructor=h;var p=function(t){var n=this,r=e.observable((new Date(t.value)).getTime()/1e3||null);a.call(this,t||{}),this.template.edit="base-edit",this.data.value=e.pureComputed({read:function(){return r()?n.yyyymmdd(new Date(r()*1e3)):null},write:function(e){r(e?(new Date(e)).getTime()/1e3:null)}})};p.prototype=Object.create(a.prototype),p.constructor=p,p.prototype.yyyymmdd=function(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),r=e.getDate().toString();return t+"-"+(n[1]?n:"0"+n[0])+"-"+(r[1]?r:"0"+r[0])};var d=function(e){a.call(this,e||{}),this.template.edit="base-edit"};d.prototype=Object.create(a.prototype),d.constructor=d,d.prototype.toggleImageBrowser=function(){n.imgBrowserSetting=this,n.imgBrowserActive(!0)};var v=function(t){f.call(this,t||{}),this.data.options=e.observableArray(t.options),this.icon=e.observable(t.type.indexOf("icon")>-1?!0:!1),this.template.manage=e.pureComputed(function(){return(this.icon()?"icon-":"")+"radio-manage"},this)};v.prototype=Object.create?Object.create(f.prototype):f.prototype,v.constructor=v;var m={text:l,textarea:l,date:p,image:d,color:h,checkbox:c,"switch":c,select:f,radio:v,"icon-radio":v,"icon-checkbox":c,"section-title":u};return m}),define("master",["modules/globals","lib/knockout","lib/filesaver","models/tab","models/setting","modules/state"],function(e,t,n,r,i,s){function h(e){var n=this;this.data=t.observableArray(t.utils.arrayMap(e,function(e){return new r(e)})),this._data=this.data(),this.tabListTemplate=t.pureComputed(function(){return"tablist-"+n.mode()}).extend({rateLimit:100}),this.config=JSON.parse(document.getElementById("cs-config").value),this.config.editPerm=this.config.editPerm==="false"?!1:!0,this.config.adminDir=function(){var e=location.href.slice(0,location.href.lastIndexOf("/"));return e.slice(e.lastIndexOf("/")+1)}(),this.types=l,this.accessLevels=c,this.errors={actions:{tabRemove:["warn_tab_remove","notify",{ok:function(){singleSelectList.prototype.remove.apply(n.data)}}],settingsRemove:["This action will irrevocably delete all selected settings. Are you sure you wish to proceed?","notify",{ok:function(){List.prototype.remove.apply(n.data.items()[n.data.activeItem()].settings)}}]}},this.state=s,this.state.tabSelection.subscribe(function(e){var t=n.data()[e],r;e>-1&&t.tab.data.type==="plugin"&&(r=a.hooks[t.tab.data.lookup()],r.inited!==!0&&typeof r.init=="function"&&(r.init(),r.inited=!0),typeof r.update!="undefined"&&r.update())}),this.state.tabSelection.subscribe(function(e){var t=n.data()[e],r;e>-1&&t.tab.data.type==="plugin"&&(r=a.hooks[t.tab.data.lookup()],typeof r.dispose=="function"&&r.dispose())},null,"beforeChange"),this.mode=this.state.mode,this.modeLabel=t.pureComputed(function(){return"mode_"+(n.mode()==="edit"?"manage":"edit")}),this.pageTitle=t.pureComputed(function(){return n.state.tabSelection()>-1&&n.data()[n.state.tabSelection()]?t.unwrap(n.data()[n.state.tabSelection()].tab.data.label):o("title")}),this.modules={main:{name:t.computed(function(){return"settinglist-"+n.mode()}),params:t.computed(function(){return{tab:n.data()[n.state.tabSelection()],state:n.mode}})},nav:{name:"nav",params:this},search:{name:"search-module",params:{data:t.pureComputed(function(){return n.data()[n.state.tabSelection()].settings()}),length:2,search:n.state.searchFilter}}},this.selectedTab=t.pureComputed(function(){return n.data()[n.state.tabSelection()]}),this.exportList=t.pureComputed(function(){var e=[{label:"  ",lookup:"none"},{label:o("label_sitesettings"),lookup:"site"}],t=n.data();for(var r=0;r<t.length;r++)e.push({label:t[r].tab.data.label(),lookup:t[r].tab.data.lookup(),index:r});return e}),this.checkPluginVersion()}var o=e.i18n,u=e.notifier,a=e.GS,f=e.$,l=[{value:"text",label:o("input_text")},{value:"textarea",label:o("input_textarea")},{value:"checkbox",label:o("input_checkbox")},{value:"radio",label:o("input_radio")},{value:"select",label:o("input_select")},{value:"image",label:o("input_image")},{value:"switch",label:o("input_switch")},{value:"color",label:o("input_color")},{value:"section-title",label:o("input_section_title")},{value:"date",label:o("input_date")}],c=[{value:"normal",label:o("access_normal")},{value:"locked",label:o("access_locked")},{value:"hidden",label:o("access_hidden")}];h.prototype.toggleMode=function(){var e=this.mode();this.mode(e==="edit"?"manage":"edit")},h.prototype.addHook=function(e,n){var r=t.utils.arrayFirst(this.data(),function(t){return t.tab.lookup()===e});r&&(r.tab.init=n.init,r.tab.update=n.update)},h.prototype.showPluginInfo=function(e,t){var n=document.getElementById("cs-plugin-info");t.preventDefault(),u(n.innerHTML,"notify",!1,"long")},h.prototype.checkForNamingConflict=function(){var e=this.data(),t=e.length,n,r,i;for(var s=0;s<t;s++){for(var a=0;a<t;a++)if(e[s].tab.data.lookup()===e[a].tab.data.lookup()&&a!==s)return n=o("error_conflict_tabs").replace("%tab1%",e[s].tab.data.label()).replace("%tab2%",e[a].tab.data.label()),u(n,"error"),!0;r=e[s].settings(),i=r.length;for(var f=0;f<i;f++)for(var l=0;l<i;l++)if(r[f].data.lookup()===r[l].data.lookup()&&f!==l)return n=o("error_conflict_settings").replace("%setting1%",r[f].data.label()).replace("%setting2%",r[l].data.label()).replace("%tab%",e[s].tab.data.label()),u(n,"error"),!0}},h.prototype.checkForChanges=function(){var e=t.toJS(this.data()),n=this._data,r,i,s,o,u,a;if(e.length!==n.length)return!0;for(var f=0;f<e.length;f++){if(e[f].tab.data.type==="site"){r=e[f].tab.getData(),i=n[f].tab.getData();for(var l in r)if(r[l]!==i[l])return!0}s=e[f].settings,o=n[f].settings;if(s.length!==o.length)return!0;for(var c=0;c<s.length;c++){u=s[c].getData(),a=o[c].getData();if(e[f].tab.data.type==="site"){if(Object.keys(u).length!==Object.keys(a).length)return!0;for(var l in u)if(typeof u[l]=="object"){if(u[l].join("")!==a[l].join(""))return!0}else if(u[l]!==a[l])return!0}else if(u.value!==a.value)return!0}}return!1},h.prototype.getJSON=function(e,t){var n=this;f.ajax({url:this.config.handler,type:"POST",data:{action:e,path:this.config.handler,requestToken:this.config.requestToken,adminDir:this.config.adminDir,id:this.config.id}}).done(function(e,n,r){t&&typeof t=="function"&&t(e,n)}).fail(function(e,n,r){t&&typeof t=="function"&&t(null,n,r)})},h.prototype.sendJSON=function(e,t,n){var r=this;f.ajax({url:this.config.handler,type:"POST",data:{action:e,path:this.config.handler,requestToken:this.config.requestToken,adminDir:this.config.adminDir,id:this.config.id,data:t}}).done(function(e,t,r){n&&typeof n=="function"&&n("success")}).fail(function(e,r,i){console.log(t),n&&typeof n=="function"&&n("error",i)})},h.prototype.saveData=function(){var e=this.data(),n=this,r={};if(this.checkForNamingConflict()||!this.checkForChanges())return;this.sendJSON("saveData",this.formatExport(),function(e){e==="success"?(u(o("SETTINGS_UPDATED"),"updated"),n._data=t.toJS(n.data())):u(o("error_save"),"error")})},h.prototype.formatExport=function(e,n){var r=n||this.data(),i={},s;return t.utils.arrayForEach(r,function(e){s=e.tab.data.lookup(),i[s]={tab:e.tab.getData(),settings:t.utils.arrayMap(e.settings(),function(e){var t=e.getData();return e.icon&&e.icon()&&(t.type="icon-"+t.type),t})}}),e?t.toJSON(i,null,2):t.toJSON(i)},h.prototype.formatTab=function(e){var n={tab:e.tab.getData(),settings:t.utils.arrayMap(e.settings(),function(e){return e.getData()})};return t.toJS(n)},h.prototype.resetValues=function(){var e=this.data()[this.state.tabSelection()].settings();for(var t=0;t<e.length;t++)e[t].data.hasOwnProperty("value")&&e[t].data.hasOwnProperty("default")&&e[t].data.value(e[t].data["default"])},h.prototype.checkPluginVersion=function(){var e=this;this.getJSON("loadPluginInfo",function(t){var n=f.parseJSON(t),r=e.config.pluginVer.indexOf("."),i=n.version.indexOf("."),s=parseFloat(e.config.pluginVer.slice(0,r)+"."+e.config.pluginVer.slice(r+1).replace(/\./g,"")),a=parseFloat(n.version.slice(0,i)+"."+n.version.slice(i+1).replace(/\./g,"")),l=o("about_new_version")+' <a href="http://get-simple.info/extend/export/10656/913/gs-custom-settings.zip">'+o("about_download")+" v."+n.version+"</a>",c=document.getElementById("cs-plugin-info").getElementsByTagName("a")[0];a>s&&(u(l,"notify"),c.href=n.file,c.parentNode.className="")})};var p=function(e,t){window.Blob?window.saveAs(new Blob([e],{type:"text/plain; charset=utf-8"}),t):window.saveTextAs(e,t.replace(".json",""))};return h.prototype.exportAsData=function(e,n){var r,i=this,s=this.data()[n],o="	",u="data.json";n?(r=this.formatTab(s),e==="theme_settings"?(u="theme_data_"+this.config.template+".json",r.tab.lookup=this.config.template,delete r.tab.label):r.tab.type==="site"?u=e+"_data.json":u="plugin_data_"+r.tab.lookup+".json"):(r={site:[]},t.utils.arrayForEach(this.data(),function(e){r.site.push(i.formatTab.call(i,e))},this)),p(t.toJSON(r,null,o),u)},h.prototype.exportAsDev=function(e,n){var r=this.data()[this.state.tabSelection()],i=n.target||n.srcElement,s=i.value,o="settings.json",u="	",a=this.formatTab(r);a.tab.type=s,s==="theme"&&delete a.tab,saveTextAs(t.toJSON(a,null,u),o),i.selectedIndex=0},h.prototype.importData=function(e,n){var r=this.returnTab,i=this.mergeTabs,s=this.addTab,o=this,a=(n.target||n.srcElement).value,f=(n.target||n.srcElement).files[0],l,c,h=this.data(),p={},d=function(){a=a.indexOf("\\")>-1?a.slice(a.lastIndexOf("\\")+1):a;if(a.match("theme_data"))return"theme";if(a.match("plugin_data"))return"plugin";if(a.match(/\bdata.json/))return"site";if(a.match("_data.json"))return"tab"}();if(!window.File||!window.FileReader||!window.FileList||!window.Blob){u("error_jsonimport_invalidbrowser","error");return}if(f){if(!a.match(".json")){u("error_jsonimport_invalidext","error");return}l=new FileReader,l.readAsText(f),l.onload=function(){if(l.result.length){try{var e=JSON.parse(l.result)}catch(n){u("error_jsonimport_invalidjson","error");return}if(o.mode()==="manage"){var a=document.getElementById("sidebar").getElementsByTagName("ul")[0];t.cleanNode(a),t.applyBindingsToNode(a,null,t.contextFor(n.target||n.srcElement).$root)}switch(d){case"theme":var f=r.call(o,"type","theme");f&&e.theme===document.getElementById("site-template").value?i(f,e):u("error_jsonimport_thememissing","error");break;case"tab":var c=r.call(o,e.tab.lookup);c?i(c,e):s.call(o,e);break;case"site":for(var h=0;h<e.site.length;h++){var c=r.call(o,e.site[h].tab.lookup);c?i(c,e.site[h]):s.call(o,e.site[h])}break;case"plugin":var p=r.call(o,e.tab.lookup);p&&p.type==="plugin"?i(p,e):u("error_jsonimport_pluginmissing","error")}}}}},h.prototype.addTab=function(e){var n=this.data(),s=n.length,e={tab:new r(e||{type:"site",lookup:o("def_tab_lookup"),label:o("def_tab_label")}),settings:t.observableArray(e&&e.settings?t.utils.arrayMap(e.settings,function(e){return new i[e.type](e)}):[])};while(s--)if(n[s].tab.data.type!=="site")break;this.data.splice(s-2||0,0,e),this.data.valueHasMutated()},h.prototype.mergeTabs=function(e,n){var r=e.settings(),s=n.settings,o=t.utils.arrayMap(s,function(e){return e.lookup}),u=["value","type","descr","access","label","options","values"],a;for(var f=0;f<r.length;f++){a=o.indexOf(r[f].data.lookup());if(a>-1){var l=t.utils.arrayFirst(s,function(e){return e.lookup===r[f].data.lookup()});for(var c in r[f].data)if(t.unwrap(r[f].data[c])!==s[a][c]){if(/options|i18n/.test(c)&&l[c]){var h=[];t.utils.arrayForEach(l[c],function(e,t){h.push(e)}),l[c]=h}typeof r[f].data[c]=="function"?r[f].data[c](l[c]):r[f].data[c]=l[c]}o.splice(a,1)}}if(o.length)for(var f=0;f<o.length;f++){var p=t.utils.arrayFirst(s,function(e){return e.lookup===o[f]});e.settings.push(new i[p.type](p))}e.settings.valueHasMutated()},h.prototype.unmap=function(e){var n=this,s,u=[];for(var a in e){var f=e[a];f.tab.label=f.tab&&f.tab.type==="theme"?o("label_themesettings"):f.tab.label,f.tab.type=f.tab.type||"site",u.push({tab:new r(f),settings:t.observableArray(t.utils.arrayMap(f.settings,function(e){return new i[e.type](e)}))})}this.data(u)},h.prototype.returnTab=function(e){var n=this.data();return t.utils.arrayFirst(n,function(t){return t.tab.data.lookup()===e})||!1},h.prototype.returnSetting=function(e,n){var r=t.utils.arrayFirst(this.data(),function(t){return t.tab.data.lookup()===e});if(!r)return null;var i=t.utils.arrayFirst(r.settings(),function(e){return e.data.lookup()===n});return i.data},h}),define("modules/search",["lib/knockout","modules/state"],function(e,t){function n(e){var n=this;this.data=e.data,this.minLength=e.length,this.searchTerm=e.search,this.searchTerm.subscribe(this.filterSettings.bind(this)),t.tabSelection.subscribe(this.filterSettings.bind(this)),t.mode.subscribe(this.clear.bind(this))}n.prototype.filterSettings=function(){var t=[],n=this.searchTerm().toLowerCase(),r=document.querySelectorAll(".setting");e.utils.arrayForEach(r,function(t,i){var s=e.dataFor(t);if(!s)return;var o=s.data.access&&s.data.access(),u=s.data.label().toLowerCase(),a=s.data.lookup().toLowerCase();if(s.data.type!=="section-title"&&o==="hidden")return;u.indexOf(n)>-1||a.indexOf(n)>-1||n.length<this.minLength?r[i].removeAttribute("style"):r[i].style.display="none"})},n.prototype.clear=function(){this.searchTerm("")},e.components.register("search-module",{viewModel:n,template:'<i class="fa fa-search fa-flip-horizontal"></i><input type="text" data-bind="textInput: searchTerm" placeholder="{{ \'label_search\' | i18n }}">'})}),define("modules/animation",[],function(){var e={},t=function(t,n){e[t](n)},n="#cs-main-toolbar";return e["remove-setting"]=function(e,t,n){var r=$(e),i=200;r.animate({height:"0px"},i,function(){setTimeout(function(){r.remove()},i)})},e["insert-setting"]=function(e,t,n){var r=$(e),i=200,s=30;r.css({height:"0px","border-bottom-color":"transparent"}).animate({height:s+"px"},0,function(){setTimeout(function(){r.removeAttr("style")},i)})},e["sticky-toolbar"]=function(){var e=$(n);$.ScrollToFixed(e)},t}),define("domReady",[],function(){"use strict";function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("modules/settings-manage",["lib/knockout","modules/globals"],function(e,t){function s(e){this.tab=e.tab.tab,this.items=e.tab.settings}var n=t.notifier,r="settinglist-manage",i="settings-manage.html";s.prototype.codeTitleForSetting=function(e){return this.tab.data.lookup()+"/"+e.data.lookup()},s.prototype.showSettingCode=function(e,t){var r=this.tab.data.lookup()+"/"+e.data.lookup(),i='<span style="font-family: Consolas, monospace;">'+r+"<span>"+'<input type="text" id="cs-code-copy" value="(% setting: '+r+' %)">';n(i,"notify",null,"long"),document.getElementById("notification-manager").getElementsByTagName("input")[0].select()},e.components.register(r,{viewModel:s,template:{require:"text!templates/"+i}})}),define("modules/tabs-manage",["lib/knockout"],function(e){function i(t){var n=this;this.selection=t.state.tabSelection,this.items=e.utils.arrayMap(t.tabs(),function(t){return e.toJS(t.tab)}),this.loadTabFromHash(t.state.pageLoaded)}var t="tablist-manage",n="sidebar-manage",r="current";i.prototype.select=function(t,n){return this.selection(e.contextFor(n.target||n.srcElement).$index()),!0},i.prototype.tabClass=function(e){return e()===this.selection()?r:""},i.prototype.tabHash=function(e){return"#"+e.data.lookup},i.prototype.loadTabFromHash=function(t){var n=this,r=location.href.slice(location.href.indexOf("#")+1),i=e.utils.arrayFirst(this.items,function(e){return e.data.lookup===r})||!1,s=0;if(t())return;t(!0),!r.match("#")&&!i&&this.items.length&&n.selection(0),e.utils.arrayForEach(this.items,function(e,t){i&&i.data.lookup===e.data.lookup&&n.selection(t)})},i.prototype.dispose=function(){var t=this.items,n=this.selection();if(!t.length){this.selection(-1);return}if(n>-1&&t[n].data.type!=="site"){var r=e.utils.arrayFilter(t,function(e){return e.data.type==="site"});this.selection(r.length?r.length-1:-1)}},e.components.register(t,{viewModel:i,template:{require:"text!templates/"+n+".html"}})}),define("modules/settings-edit",["lib/knockout","models/setting","modules/animation","modules/globals"],function(e,t,n,r){function h(t){var n=this,r=t.tab.settings().length>15;this.options={maxLimit:100,minLimit:0,maxSelect:!1,keysActive:!1},this.showLoader=e.observable(!1),this.tab=t.tab.tab,r&&(a=t.tab.settings(),l=a.concat([]),t.tab.settings([]),this.showLoader(!0)),this.items=t.tab.settings,r&&(c=!0,f=setInterval(function(){n.items.push(a.shift()),a.length===0&&(c=!1,n.showLoader(!1),clearInterval(f))},50)),this.selection=e.observableArray([]),this.expanded=e.pureComputed({read:function(){return e.utils.arrayFilter(n.items(),function(e){return e.expanded&&e.expanded()})},write:function(t){e.utils.arrayForEach(n.selection(),function(e){n.items()[e].expanded&&n.items()[e].expanded(t)})}},this),this.shiftSelIndex=e.observable(!1),this.allExpanded=e.pureComputed(function(){var t=n.items(),r=n.expanded().length;return r>0&&r===e.utils.arrayFilter(n.selection(),function(e){return t[e].data.type!=="section-title"}).length}),this.selectButtonActive=e.pureComputed(function(){return n.items().length&&n.selection().length===n.items().length?"active":""}),this.expandButtonActive=e.pureComputed(function(){var t=n.items(),r=e.utils.arrayFilter(n.selection(),function(e){return t[e].expanded});return t.length&&n.expanded().length===r.length&&r.length>0?"active":""}),this.disable={del:e.pureComputed(function(){return!n.selection().length}),add:e.pureComputed(function(){return n.options.maxLimit===n.items().length}),up:e.pureComputed(function(){return n.selection()[0]>0?!1:!0}),down:e.pureComputed(function(){return n.selection()[n.selection().length-1]<n.items().length-1&&n.selection().length!==n.items().length?!1:!0}),select:e.pureComputed(function(){return n.items().length===0}),expand:e.pureComputed(function(){return n.selection().length===0})},this.setSticky()}var i=r.notifier,s=r.$,o="settinglist-edit",u="settings-edit.html",a,f=null,l=null,c=!1;h.prototype.selectAll=function(e,t){var n=this.items(),r=t.target.nodeName==="I"?t.target.parentNode:t.target,i=this.selection(),s=-1,o=[];if(i.length===n.length)this.selection([]);else{while(s++<n.length-1)o.push(s);this.selection(o)}},h.prototype.expandAll=function(e,t){var n=this.items(),r=this.selection(),i=!1;for(var s=0;s<r.length;s++)n[r[s]].expanded&&n[r[s]].expanded()===!1&&(i=!0);this.expanded(i)},h.prototype.insertBefore=function(e,n){var r,i=0,s=this.selection(),o=this.items(),u=this.expanded(),a=!1;if(!s.length)o.unshift(new t.text({type:"text",options:[]}));else{s.sort();for(var f=0;f<s.length;f++)s[f]+1!==s[f+1]&&s[f+1]&&(a=!0);if(!a){r=Math.max.apply(null,s)+1;for(var i=s.length;i--;)s[i]=r,o.splice(r,0,new t.text({})),r+=1}else for(var i=s.length;i--;)r=s[i]+1,s[i]+=i+1,o.splice(r,0,new t.text({}));this.selection(s)}this.items(o)},h.prototype.remove=function(){var e=this.selection(),t=this.items();if(!e.length)return;this.selection([]);for(var n=e.length;n--;)t.splice(e[n],1);this.items(t)},h.prototype.replace=function(n,r){var i=e.toJS(n.data),s=this.items();i.type!=="section-title"&&(i.expanded=n.expanded()),i.type=r.options[r.selectedIndex].value,c=!0,s[e.contextFor(r).$index()]=new t[i.type](i),this.items(s),c=!1},h.prototype.clone=function(){var n,r,i=this.selection(),s=!1;for(var o=i.length;o--;)n=e.toJS(this.items()[i[o]].data),this.items.splice(i[o]+1,0,new t[n.type](n))},h.prototype.moveUp=function(){function l(){t=f.splice(n,1)[0],f.splice(insertAt,0,t),i=e.utils.arrayMap(r,function(e){return e-1})}var t,n,r=this.selection(),i=r.concat([]),s=0,o=0,u=Math.min.apply(null,r),a=!1,f=this.items();if(!r.length)return;while(r[o++])r[o]+1!==r[o+1]&&(a=!0);if(u!==s){if(!a)n=u-1,insertAt=Math.max.apply(null,r),l.call(this);else for(var o=0;o<r.length;o++)n=r[o]-1,insertAt=r[o],l.call(this);this.selection(i),this.items(f)}},h.prototype.moveDown=function(){function l(){t=o.splice(n,1)[0],o.splice(insertAt,0,t),s=e.utils.arrayMap(i,function(e){return e+1})}var t,n,r=0,i=this.selection(),s=i.concat([]),o=this.items(),u=o.length-1||0,a=Math.max.apply(null,i),f=!1;if(!i.length)return;while(i[r]>-1)i[r]+1!==i[r+1]&&(f=!0),r++;if(a!==u){if(!f)n=a+1,insertAt=Math.min.apply(null,i),l.call(this);else for(var r=i.length;r--;)n=i[r]+1,insertAt=i[r],l.call(this);this.selection(s),this.items(o)}},h.prototype.keyHandler=function(e,t){if(t.ctrlKey&&t.target.nodeName!=="INPUT"){document.getElementsByClassName("cs-main")[0].getElementsByTagName("div")[1].focus();switch(t.keyCode){case 46:this.remove();break;case 38:this.moveUp();break;case 40:this.moveDown();break;case 13:this.insertBefore();break;case 65:t.preventDefault();var n=this.items(),r=[];if(this.selection().length!==n.length){for(var i=0;i<n.length;i++)r.push(i);this.selection(r)}}}return!0},h.prototype.animateRemoval=function(e){e.nodeType===1&&c===!1?n("remove-setting",e):e.parentNode.removeChild(e)},h.prototype.animateInsertion=function(e){e.nodeType===1&&c===!1&&n("insert-setting",e)},h.prototype.setSticky=function(){s.ScrollToFixed&&n("sticky-toolbar")},h.prototype.classForSetting=function(e,t){var n=this,r="setting "+e.data.type;return r+=e.expanded&&e.expanded()?" expanded":"",r+=this.selection().indexOf(t)>-1?" active":"",r},h.prototype.codeTitleForSetting=function(e){return this.tab.data.lookup()+"/"+e.data.lookup()},h.prototype.showSettingCode=function(e,t){var n=this.codeTitleForSetting(e),r='<span style="font-family: Consolas, monospace;">'+n+"<span>"+'<input type="text" id="cs-code-copy" value="<?php get_setting(\''+n.replace("/","','")+"'); ?>\">";i(r,"notify",null,"long"),document.getElementById("notification-manager").getElementsByTagName("input")[0].select()},h.prototype.dispose=function(){this.items().forEach(function(e){e.expanded&&e.expanded(!1)}),this.showLoader()&&(clearInterval(f),this.items(l))},e.components.register(o,{viewModel:h,template:{require:"text!templates/"+u}})}),define("modules/tabs-edit",["lib/knockout","models/tab","modules/globals"],function(e,t,n){function a(t){var n=this,r=this.minLimit=0,i=this.maxLimit=100;this.defaults={tab:{lookup:o("def_tab_label").toLowerCase().replace(/\s+/g,"_"),label:o("def_tab_label"),type:"site"}},this.mode=t.state.mode,this.originalItems=t.tabs,this.selection=t.state.tabSelection,this.activeProp=e.observable("label"),this.items=e.pureComputed(function(){var n,r=e.utils.arrayFilter(t.tabs(),function(e,t){return e.tab.data.type==="site"});return n=e.utils.arrayMap(r,function(e){return e.tab}),n}).extend({enablePausing:!0}),this.disable={del:e.pureComputed(function(){return!n.items().length}),add:e.pureComputed(function(){return!n.maxLimit===n.items().length}),up:e.pureComputed(function(){var e=n.selection();return!n.items().length||e<1||e===!1}),down:e.pureComputed(function(){var e=n.items();return!e.length||n.selection()===e.length-1})}}var r="current",i="tablist-edit",s="sidebar-edit",o=n.i18n,u=n.notifier;a.prototype.select=function(t,n){var r=n.target||n.srcElement;return r.nodeName!=="INPUT"&&r.parentNode.getElementsByTagName("input")[0].focus(),this.selection(e.contextFor(r).$index()),!0},a.prototype.insertBefore=function(){var n=this.selection();this.originalItems.splice(this.selection(),0,{tab:new t(this.defaults),settings:e.observableArray()}),this.selection()===-1&&this.selection(0)},a.prototype.remove=function(t,n){var r=this.selection(),i=this.originalItems(),s=e.contextFor(n.target).$root,a=this;r>-1&&(i[r].settings().length?u(o("warn_tab_remove"),"notify",function(){a.removeInner.call(a)}):this.removeInner())},a.prototype.removeInner=function(){var e=this.selection(),t=this.originalItems;e>0&&this.selection(e-1),t.splice(e,1),this.items().length===0&&this.selection(-1)},a.prototype.moveUp=function(){var e=this.selection(),t=this.originalItems();this.disable.up()||(t.splice(e,0,t.splice(e-1,1)[0]),this.originalItems(t),this.selection(e-1))},a.prototype.moveDown=function(){var e=this.selection(),t=this.originalItems();this.disable.down()||(this.selection(e+1),t.splice(e,0,t.splice(e+1,1)[0]),this.originalItems(t))},a.prototype.toggleProp=function(){this.activeProp(this.activeProp()==="label"?"lookup":"label")},a.prototype.tabClass=function(e){return e()===this.selection()?r:""},a.prototype.tabHash=function(e){return"#"+e.data.lookup()},a.prototype.dispose=function(){!this.items().length&&this.originalItems().length&&this.selection(0)},e.components.register(i,{viewModel:a,template:{require:"text!templates/"+s+".html"}})}),define("modules/image-browser",["lib/knockout","modules/state","modules/globals"],function(e,t,n){function a(){var n=this,r;this.uploadDir=e.observableArray([]),this.activeDir=e.observableArray([]),this.activeImg=e.observable(),this.activeImgN=e.observable(""),this.folderPath=e.observableArray(["uploads"]),this.active=t.imgBrowserActive,r=this.active.subscribe(function(){n.load.call(null,n,r)})}var r="img-browser",i="image-browser",s=n.$,o=function(){return window.GS.config},u=!1;a.prototype.load=function(e,t){var n=o(),r;u||s.ajax({url:n.handler,type:"GET",data:{action:"loadImageBrowser",path:n.handler,contentType:"application/json; charset=utf-8",dataType:"json",requestToken:n.requestToken,adminDir:n.adminDir,id:n.id}}).done(function(n,r,i){n=JSON.parse(n),e.uploadDir(n),e.activeDir(n),t.dispose()})},a.prototype.setFolder=function(e,t){if(typeof e=="string"){var n=this.findFolderByName(e),r=n.path.split("/");this.folderPath(r.splice(0,r.length-1)),this.activeDir(n);return}var n=this.findFolder(e),r=e.path.split("/");this.folderPath(r.splice(0,r.length-1)),this.activeDir(n)},a.prototype.findFolderByName=function(e,t){var n=t||this.uploadDir(),r=null;if(e==="uploads")return n;for(var i=0;i<n.children.length;i++)n.children[i].folder===e?r=n.children[i]:n.children[i].children&&(r=this.setFolderFromName(e,n.children[i]));return r},a.prototype.findFolder=function(e,t){var n=this.uploadDir(),r=e.path.split("/");for(var i=1;i<r.length-1;i++)for(var s=0;s<n.children.length;s++)n.children[s].folder===r[i]&&(n=n.children[s]);return n},a.prototype.isActiveImg=function(e){return e.name===this.activeImgN()},a.prototype.selectImg=function(e){this.activeImg(e)},a.prototype.setImgName=function(e){this.activeImgN(e.name)},a.prototype.resetImgName=function(e){this.activeImgN(this.activeImg()?this.activeImg().name:"")},a.prototype.set=function(){t.imgBrowserSetting.data.value(this.activeImg().path),this.dispose()},a.prototype.dispose=function(){this.active(!1),this.activeImg(null),this.activeDir(this.uploadDir()),this.folderPath(["uploads"])},e.components.register(r,{viewModel:a,template:{require:"text!templates/"+i+".html"}})}),requirejs.config({baseUrl:"../plugins/custom_settings/js/",paths:{lib:"lib",models:"models",modules:"modules",templates:"../tmpl"}}),require(["modules/globals","lib/knockout","lib/knockout.punches.min","modules/ko-extensions","master","modules/search","models/tab","modules/animation","domReady","text","modules/settings-manage","modules/tabs-manage","modules/settings-edit","modules/tabs-edit","modules/image-browser"],function(e,t,n,r,i,s,o,u,a){a(function(){var n=e.$,r=e.i18n,s=window.GSCS=new i;document.getElementById("sidebar").getElementsByTagName("ul")[0].setAttribute("data-bind","component: {name: tabListTemplate, params: {tabs: data, state: state, mainParams: modules.main }}"),e.GS.config=s.config,t.components.register("nav",{template:{require:"text!templates/nav.html"}}),n(document.body).on("click",".setting.date .setting-field",function(e){var r=n(this);r.hasClass("hasDatePicker")||r.datepicker({dateFormat:"yy-mm-dd",onSelect:function(e){var n=t.dataFor(r[0]);n.data.value(e)}}).datepicker("show")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){t===undefined&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(var n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1}),t.utils.registerEventHandler(document.body,"keydown",function(e){e.ctrlKey&&(e.keyCode===70?(e.preventDefault(),document.getElementById("setting-search").getElementsByTagName("input")[0].focus()):e.keyCode===83&&(e.preventDefault(),s.saveData.call(s)))}),s.getJSON("getDataFile",function(e){s.unmap(JSON.parse(e).data),s._data=t.toJS(s.data()),document.body.className+=" cs-loaded",n(document.body).on("mouseup","#notification-manager input",function(e){e.preventDefault(),(e.target||e.srcElement).select()}),n(document.body).on("click",".setting.switch .icon-button, .setting.icon-checkbox .icon-button",function(e){var n=t.dataFor(e.target).data.value;n(!n())}),n(document.body).on("click",".setting .select",function(e){var n=t.contextFor(e.target||e.srcElement),r=n.$parent.selection,i=r(),s=n.$parent.shiftSelIndex,o=n.$index(),u=!0;if(!e.shiftKey&&!e.ctrlKey){if(!i.length)r.push(o);else{if(i.indexOf(o)===-1||i.indexOf(o)>-1&&i.length>1)u=!1;r([]),u||r.push(o)}s(o)}else if(e.ctrlKey)i.indexOf(o)===-1?r.push(o):r.splice(i.indexOf(o),1),s(o);else if(e.shiftKey){var a=s(),f=[];if(a>o)for(var l=0;o+l<=a;l++)f.push(o+l);else for(var l=0;a+l<=o;l++)f.push(a+l);r(f)}}),t.applyBindings(s,document.body),window.ko=t})})}),define("main",function(){});